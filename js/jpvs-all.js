var jpvs=(function(){function a(h,d){var f=document.getElementsByTagName("head")[0]||document.documentElement;var g=document.createElement("script");g.src=h;var e=false;g.onload=g.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){e=true;d()}};f.insertBefore(g,f.firstChild)}function c(g,f){var d=false;for(var e in g){var h=g[e];if(h==f){d=true;break}}if(!d){g.push(f);return true}else{return false}}function b(d,s){var t={ClassToFile:{jpvs:"Core.js",Event:"Event.js",Resources:"Resources.js",Button:"widgets/Button.js",CheckBox:"widgets/CheckBox.js",DataGrid:"widgets/DataGrid.js",DateBox:"widgets/DateBox.js",DocumentEditor:"widgets/DocumentEditor.js",DropDownList:"widgets/DropDownList.js",ImageButton:"widgets/ImageButton.js",LinkButton:"widgets/LinkButton.js",Menu:"widgets/Menu.js",MultiLineTextBox:"widgets/MultiLineTextBox.js",MultiSelectBox:"widgets/MultiSelectBox.js",Pager:"widgets/Pager.js",Popup:"widgets/Popup.js",Scroller:"widgets/Scroller.js",Table:"widgets/Table.js",TextBox:"widgets/TextBox.js",TileBrowser:"widgets/TileBrowser.js",Tree:"widgets/Tree.js",Storage:"storage/Storage.js",SvgParser:"parsers/SvgParser.js",XmlParser:"parsers/XmlParser.js"},ClassToModule:{jpvs:"core",Event:"core",Resources:"core",Button:"widgets",CheckBox:"widgets",DataGrid:"widgets",DateBox:"widgets",DocumentEditor:"widgets",DropDownList:"widgets",ImageButton:"widgets",LinkButton:"widgets",Menu:"widgets",MultiLineTextBox:"widgets",MultiSelectBox:"widgets",Pager:"widgets",Popup:"widgets",Scroller:"widgets",Table:"widgets",TextBox:"widgets",TileBrowser:"widgets",Tree:"widgets",Storage:"storage",SvgParser:"parsers",XmlParser:"parsers"},ModuleToDepends:{animations:["core"],tasks:["core"],utils:["core"],binding:["core"],core:["bootstrap"],bootstrap:[],widgets:["core","parsers","table","linkbutton","imagebutton"],storage:["core","utils"],parsers:["core"]},ModuleToFiles:{animations:["Animations.js"],tasks:["BackgroundTask.js"],utils:["Base64.js","JSON.js","Random.js","Session.js","utils/Equals.js"],binding:["Binding.js"],core:["Core.js","Event.js","Resources.js"],bootstrap:["jpvs.js"],widgets:["widgets/Button.js","widgets/CheckBox.js","widgets/DataGrid.js","widgets/DateBox.js","widgets/DocumentEditor.js","widgets/DropDownList.js","widgets/ImageButton.js","widgets/LinkButton.js","widgets/Menu.js","widgets/MultiLineTextBox.js","widgets/MultiSelectBox.js","widgets/Pager.js","widgets/Popup.js","widgets/Scroller.js","widgets/Table.js","widgets/TextBox.js","widgets/TileBrowser.js","widgets/Tree.js"],storage:["storage/Storage.js"],parsers:["parsers/HtmlCleaner.js","parsers/SvgParser.js","parsers/XmlParser.js"]}};var r=[];if(d){for(var m in d){var e=d[m];var q=t.ClassToModule[e];c(r,q)}}if(s){for(var m in s){var q=s[m];c(r,q)}}var p=true;while(p){p=false;for(var m in r){var q=r[m];var g=t.ModuleToDepends[q];for(var n in g){var f=g[n];if(c(r,f)){p=true}}}}var o=jpvs.baseUrl||"jpvs";var l=[];for(var m in r){var q=r[m];var k=t.ModuleToFiles[q];for(var n in k){var h=k[n];c(l,o+"/"+h)}}l.reverse();return l}return function(d,g){if(!d){}else{if(typeof(d)=="function"){g=d;$(document).ready(function(){jpvs.createAllWidgets();g(jpvs.widgets)})}else{var e=b(d.classes,d.modules);function f(){if(!e.TotalCount){e.TotalCount=e.length}var h=e.shift();if(h){setTimeout(function(){a(h,f)},10)}else{jpvs.createAllWidgets();if(g){g(jpvs.widgets)}}}$(document).ready(f)}}}})();(function(){var j=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l,m){window.setTimeout(l,1000/60)};jpvs.requestAnimationFrame=function(){j.apply(window,arguments)};var h=[];var k=false;var b=null;jpvs.animate=function(p,l){var r=(p&&p.t0!=null)?p.t0:0;var s=(p&&p.t1!=null)?p.t1:1;var q=Math.abs((p&&p.step)||0);var n=Math.abs((p&&p.duration)||1000);var o=(p&&p.easingFunction)||f;var m=l||p;h.push({t0:r,t1:s,step:q,duration:n,animFunc:m,easingFunc:o,startTime:null,endTime:null});c()};function c(){if(!k){j(a);k=true}}function a(){if(b==null){if(h.length>0){b=h.shift()}else{k=false;return}}try{var l=new Date().getTime();if(b.startTime==null){b.startTime=l;b.endTime=b.startTime+b.duration}if(b.step){var m=e(l);b.animFunc(m)}else{var m=d(l);b.animFunc(m)}if(l>=b.endTime){b=null}}finally{j(a)}}function d(l){if(l<=b.startTime){return b.t0}else{if(l>=b.endTime){return b.t1}else{return b.easingFunc(b.startTime,b.endTime,b.t0,b.t1,l)}}}function e(l){var t=b.t0;var u=b.t1;var q=b.step;var o=b.startTime;var m=b.endTime;var n=Math.ceil(Math.abs((u-t)/q));var p=u>t?1:-1;var v=(m-o)/n;var r=Math.floor((l-o)/v);if(l<=o){return t}else{if(l>=m){return u}else{return t+p*r*q}}}function f(p,m,r,s,l){var o=(l-p)/(m-p);var n=0.5-Math.cos(o*Math.PI)/2;var q=r+n*(s-r);return q}function g(p,m,r,s,l){var o=(l-p)/(m-p);var n=o;var q=r+n*(s-r);return q}jpvs.animate.harmonicEasing=f;jpvs.animate.linearEasing=g;jpvs.flashClass=function(p,n,o,m,q){var l=$(p);var r=m||15;var s=2*r;jpvs.animate({t0:0,t1:s,step:1,duration:o||2000},function(u){if(u%2==0){l.addClass(n)}else{l.removeClass(n)}});jpvs.animate({t0:0,t1:1,step:1,duration:q||4000},function(u){if(u==1){l.removeClass(n)}})}})();(function(){var b=0.5;var c=50;jpvs.runTask=function(f,k,j,h,g){if(f){jpvs.runBackgroundTask(k,j,h,g)}else{jpvs.runForegroundTask(k,j,h,g)}};jpvs.runBackgroundTask=function(j,h,g,f){setTimeout(e(j,h,g,f),0)};jpvs.runForegroundTask=function(j,h,g,f){return d(j,h,g,f)};function d(n,m,l,k){var f={};try{while(true){var h=n(f);var j=a(h);if(j.keepRunning){if(l&&j.progress){l(j.progress)}}else{if(m){m(f.returnValue)}return f.returnValue}}}catch(g){if(k){k(g)}}}function e(m,k,j,h){var f={};var g=0;return l;function l(){try{var u=new Date().getTime();var p=u+g;while(true){var q=m(f);var r=a(q);if(r.keepRunning){var t=new Date().getTime();if(t<p){}else{g=r.minRunTimeMs;var s=t-u;var n=s*(1-r.cpu)/r.cpu;setTimeout(l,n);if(j&&r.progress){j(r.progress)}return}}else{if(k){k(f.returnValue)}return}}}catch(o){if(h){h(o)}}}}function a(f){if(f===null||f===undefined||f===false){return{keepRunning:false}}else{if(f===true){return{keepRunning:true,cpu:b,minRunTimeMs:c,progress:null}}else{return{keepRunning:true,cpu:f.cpu||b,minRunTimeMs:f.minRunTimeMs||c,progress:f.progress}}}}})();(function(){function d(){this.buffer=[]}d.prototype.append=function a(g){this.buffer.push(g);return this};d.prototype.toString=function e(){return this.buffer.join("")};var b={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(p){var q=new d();var o=new f(p);while(o.moveNext()){var g=o.current;o.moveNext();var h=o.current;o.moveNext();var j=o.current;var k=g>>2;var l=((g&3)<<4)|(h>>4);var m=((h&15)<<2)|(j>>6);var n=j&63;if(isNaN(h)){m=n=64}else{if(isNaN(j)){n=64}}q.append(this.codex.charAt(k)+this.codex.charAt(l)+this.codex.charAt(m)+this.codex.charAt(n))}return q.toString()},decode:function(l){var m=new d();var k=new c(l);while(k.moveNext()){var g=k.current;if(g<128){m.append(String.fromCharCode(g))}else{if((g>191)&&(g<224)){k.moveNext();var h=k.current;m.append(String.fromCharCode(((g&31)<<6)|(h&63)))}else{k.moveNext();var h=k.current;k.moveNext();var j=k.current;m.append(String.fromCharCode(((g&15)<<12)|((h&63)<<6)|(j&63)))}}}return m.toString()}};function f(g){this._input=g;this._index=-1;this._buffer=[]}f.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else{if(this._index>=(this._input.length-1)){this.current=Number.NaN;return false}else{var g=this._input.charCodeAt(++this._index);if((g==13)&&(this._input.charCodeAt(this._index+1)==10)){g=10;this._index+=2}if(g<128){this.current=g}else{if((g>127)&&(g<2048)){this.current=(g>>6)|192;this._buffer.push((g&63)|128)}else{this.current=(g>>12)|224;this._buffer.push(((g>>6)&63)|128);this._buffer.push((g&63)|128)}}return true}}}};function c(g){this._input=g;this._index=-1;this._buffer=[]}c.prototype={current:64,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else{if(this._index>=(this._input.length-1)){this.current=64;return false}else{var k=b.codex.indexOf(this._input.charAt(++this._index));var l=b.codex.indexOf(this._input.charAt(++this._index));var m=b.codex.indexOf(this._input.charAt(++this._index));var n=b.codex.indexOf(this._input.charAt(++this._index));var g=(k<<2)|(l>>4);var h=((l&15)<<4)|(m>>2);var j=((m&3)<<6)|n;this.current=g;if(m!=64){this._buffer.push(h)}if(n!=64){this._buffer.push(j)}return true}}}};jpvs.encodeUtf8Base64=function(g){return b.encode(g)};jpvs.decodeBase64Utf8=function(g){return b.decode(g)}})();(function(){jpvs.resetAllBindings=function(){c.clearAll();g()};jpvs.bindContainer=function(s,u,v,t){if(!s){return}s=jpvs.getElementIfWidget(s);jpvs.bindElements(s.find("*"),u,v,t)};jpvs.bindElements=function(w,v,z,u){if(!w){return}for(var x=0;x<w.length;x++){var y=w[x];var s=$(y);var t=s.data(u||"bind");if(t){jpvs.bind(s,v,t,z)}}};jpvs.bind=function(u,t,s,w){h();if(!t){return}var v=$.trim(s).split(",");$.each(v,function(y,z){var B=z.split("=");var x=$.trim(B[0]);var A=$.trim(B[1]);a(u,x,t,A,w)})};jpvs.findElementsBoundTo=function(s,v){var t=[];var u=j(s)+"/"+v;$.each(c.relations,function(x,w){if(w.idTo==u){t.push(w.element)}});return t};function a(t,u,s,w,x){var v=l(s,w);var z=q(t,u);z(v());var y={idFrom:k(t)+"/"+u,idTo:j(s)+"/"+w};o(y,t,u,p(s,w),x);y={idTo:k(t)+"/"+u,idFrom:j(s)+"/"+w};n(y,s,w,t,q(t,u),x)}function k(t){var s=t.data("jpvs.binding.id");if(!s){s=jpvs.randomString(20);t.data("jpvs.binding.id",s)}return s}function j(t){var s=t["jpvs.binding.id"];if(!s){s=jpvs.randomString(20);t["jpvs.binding.id"]=s}return s}function o(x,s,t,v,w){var u=m(s,t);c.put(x.idFrom,x.idTo,s,u,function(y){if(v(y)){if(w){w(false,true)}}})}function n(y,s,v,t,w,x){var u=l(s,v);c.put(y.idFrom,y.idTo,t,u,function(z){if(w(z)){if(x){x(true,false)}}})}function f(u){var t=u;var s=false;if(u.indexOf("!")==0){s=true;t=u.substring(1)}return{name:t,mustInvert:s,translate:v};function v(w){return this.mustInvert?!w:w}}function l(s,u){var t=f(u);var v=s[t.name];if(typeof(v)=="function"){return function(){var w=v();return t.translate(w)}}else{return function(){var w=s[t.name];return t.translate(w)}}}function p(s,u){var t=f(u);var v=s[t.name];if(typeof(v)=="function"){return function(x){var w=v();var y=t.translate(x);v(y);return !r(y,w)}}else{return function(x){var w=s[t.name];var y=t.translate(x);s[t.name]=y;return !r(y,w)}}}function m(s,t){var v=jpvs.find(s);if(v){var u=v[t];if(typeof(u)=="function"){return function(){return u.call(v)}}}if(t.toLowerCase().substring(0,7)=="jquery."){return function(){return s[t.substring(7)]()}}else{if(t=="#visible"){return function(){return s.css("display")!="none"&&s.css("visibility")!="hidden"}}else{if(t.substring(0,1)=="#"){alert("Invalid jpvs data-binding directive: "+t)}else{return function(){return s.attr(t)}}}}}function q(s,t){var v=jpvs.find(s);if(v){var u=v[t];if(typeof(u)=="function"){return function(w){if(!r(w,u.call(v))){u.call(v,w);return true}else{return false}}}}if(t.toLowerCase().substring(0,7)=="jquery."){return function(w){if(!r(w,s[t.substring(7)]())){s[t.substring(7)](w);return true}else{return false}}}else{if(t=="#visible"){return function(x){var w=s.css("display")!="none"&&s.css("visibility")!="hidden";if(x){s.show()}else{s.hide()}return x!=w}}else{if(t.substring(0,1)=="#"){alert("Invalid jpvs data-binding directive: "+t)}else{return function(w){if(!r(w,s.attr(t))){s.attr(t,w);return true}else{return false}}}}}}function r(s,t){return jpvs.equals(s,t)}var e;function h(){if(!e){e=setInterval(b,200)}}function g(){if(e){clearInterval(e);e=null}}function d(){this.relations={}}d.prototype.clearAll=function(){this.relations={}};d.prototype.put=function(u,v,s,t,w){this.relations[u+"ยง"+v]={idFrom:u,idTo:v,element:s,getter:t,onChangeAction:w,curValue:t()}};var c=new d();function b(){var t;var s=true;while(s){t={};s=false;$.each(c.relations,function(v,u){var w=u.getter();if(!r(w,u.curValue)){t[u.idFrom]=u.getter;s=true}});$.each(t,function(v,u){var w=u();$.each(c.relations,function(y,x){if(x.idFrom==v){x.onChangeAction(w);x.curValue=w}})})}}})();(function(){function a(b){if(!b){return b}if(b.getMainContentElement){return b.getMainContentElement()}else{return $(b)}}jpvs.getElementIfWidget=a;jpvs.widgetDefs=[];jpvs.widgets={};jpvs.find=function(c){var b=$(c);if(b.length==0){return null}else{if(b.length==1){return b.data("jpvs-widget")}else{var d=[];b.each(function(){d.push($(this).data("jpvs-widget"))});d.each=function(e){for(var f=0;f<d.length;f++){var g=d[f];e.call(g,g)}};return d}}};jpvs.states={HOVER:"Hover",FOCUS:"Focus",ERROR:"Error",DISABLED:"Disabled"};jpvs.property=function(b){return function(k,d,h,g,f){if(k===undefined){return b.get.call(this)}else{if(d){if(b.setTask){var j=b.setTask.call(this,k);jpvs.runBackgroundTask(j,h,g,f)}else{if(b.set){try{b.set.call(this,k);if(h){h()}}catch(c){if(f){f(c)}}}else{if(h){h()}}}}else{if(b.set){b.set.call(this,k)}else{if(b.setTask){var j=b.setTask.call(this,k);jpvs.runForegroundTask(j)}else{}}}return this}}};jpvs.currentLocale=(function(){var b="en";return jpvs.property({get:function(){return b},set:function(c){b=c}})})();jpvs.event=function(b){return new jpvs.Event(b)};jpvs.makeWidget=function(m){jpvs.widgetDefs.push(m);var g=m.widget;if(!g){throw"Missing widget field in widget definition"}if(!m.create){throw"Missing create function in widget definition"}if(!m.init){throw"Missing init function in widget definition"}g.__WIDGET__=m.type;if(!g.__WIDGET__){throw"Missing type field in widget definition"}if(!m.cssClass){throw"Missing cssClass field in widget definition"}g.create=e(m);g.attach=d(m);g.prototype.toString=function(){return this.__WIDGET__};g.prototype.attach=c(m);g.prototype.destroy=f(m);g.prototype.focus=h(m);g.prototype.addState=b(m);g.prototype.removeState=l(m);g.prototype.getMainContentElement=j(m);g.prototype.id=jpvs.property({get:function(){return this.element.attr("id")},set:function(n){this.element.attr("id",n)}});g.prototype.ensureId=function(){if(this.id()&&this.id()!=""){return}else{this.id(jpvs.randomString(20))}};if(m.prototype){$.each(m.prototype,function(o,n){g.prototype[o]=n})}function e(n){return function(p){var o=[];p=p||document.body;p=a(p);$(p).each(function(r,q){var s=n.create(q);o.push(n.widget.attach(s))});if(o.length==1){return o[0]}else{if(o.length==0){return undefined}else{return o}}}}function d(n){return function(o){return new n.widget(o)}}function c(n){return function(o){if(!o){return}o=a(o);this.__WIDGET__=n.type;this.element=$(o);this.element.addClass("Widget");this.element.addClass(n.cssClass);k(this);n.init.call(this,this);jpvs.widgets[this.element.attr("id")]=this;this.element.data("jpvs-widget",this)}}function f(n){return function(){var o=true;if(n.destroy){o=n.destroy.call(this,this)}if(o){this.element.remove()}}}function j(n){return function(){if(n.getMainContentElement){return n.getMainContentElement.call(this,this)}return this.element}}function k(n){n.element.hover(function(){n.addState(jpvs.states.HOVER)},function(){n.removeState(jpvs.states.HOVER)});n.element.focusin(function(){n.addState(jpvs.states.FOCUS)});n.element.focusout(function(){n.removeState(jpvs.states.FOCUS)})}function h(n){return function(){if(n.focus){n.focus.call(this,this)}else{this.element.focus()}return this}}function b(n){return function(o){this.element.addClass("Widget-"+o);this.element.addClass(n.cssClass+"-"+o);return this}}function l(n){return function(o){this.element.removeClass("Widget-"+o);this.element.removeClass(n.cssClass+"-"+o);return this}}};jpvs.createAllWidgets=function(){$("*").each(function(){var c=this;var b=$(c);var d=b.data("jpvsType");if(d){var e=jpvs[d];if(e){e.attach(this);return}}$.each(jpvs.widgetDefs,function(f,g){if(g.canAttachTo&&g.canAttachTo(c)){g.widget.attach(c);return false}})})};jpvs.write=function(b,d){if(!b){return}b=a(b);if(d){d=d.replace("\r","");var c=d.split("\n");if(c.length==1){$(b).append(document.createTextNode(c[0]))}else{if(c.length>1){$.each(c,function(e,f){$(b).append(document.createTextNode(f));$(b).append(document.createElement("br"))})}}}};jpvs.writeln=function(b,c){if(!b){return}b=a(b);jpvs.write(b,c);$(b).append(document.createElement("br"))};jpvs.writeTag=function(b,d,e){if(!b){return}if(!d){return}b=a(b);var c=document.createElement(d);$(b).append(c);jpvs.write(c,e);return $(c)};jpvs.applyTemplate=function(b,e,c){if(!b){return}if(!e){return}b=a(b);if(e.template){return jpvs.applyTemplate(b,e.template,c)}if(typeof(e)=="string"){jpvs.write(b,e);return}if(e.fieldName){var d=c&&c[e.fieldName];if(e.selector){d=e.selector(d,c)}else{d=d&&d.toString()}if(e.tagName){jpvs.writeTag(b,e.tagName,d)}else{jpvs.write(b,d)}if(e.css){b.css(e.css)}return}if(typeof(e)=="function"){return e.call($(b),c)}jpvs.alert("JPVS Error","The specified template is not valid.")};jpvs.readDataSource=function(d,n,c,g,b){if(!d){j()}else{if(typeof(d)=="function"){var h=d(n,c,g,f);if(h===undefined){}else{if(h===null){j()}else{f(h)}}}else{if(d.length){var o=d.length;var m=Math.max(0,n||0);var e;if(c===undefined||c===null){e=d.slice(m)}else{var k=Math.max(0,c||0);var l=m+k;e=d.slice(m,l)}b({total:o,start:m,count:e.length,data:e})}else{j()}}}function j(){b({total:0,start:0,count:0,data:[]})}function f(p){if(p.total&&p.data){b({total:p.total,start:p.start||0,count:p.data.length||0,data:p.data})}else{if(p.length){b({total:p.length,start:0,count:p.length,data:p})}else{j()}}}};jpvs.showDimScreen=function(c,d,e){if(jpvs.showDimScreen.timeout){return}jpvs.showDimScreen.timeout=setTimeout(b,c!=null?c:500);function b(){jpvs.showDimScreen.timeout=null;if(jpvs.showDimScreen.element){return}jpvs.showDimScreen.element=jpvs.writeTag("body","div").addClass("DimScreen").css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",display:"none"});jpvs.applyTemplate(jpvs.showDimScreen.element,e);jpvs.showDimScreen.element.fadeIn(d!=null?d:250)}};jpvs.hideDimScreen=function(b){if(jpvs.showDimScreen.timeout){clearTimeout(jpvs.showDimScreen.timeout);jpvs.showDimScreen.timeout=null}if(jpvs.showDimScreen.element){var c=jpvs.showDimScreen.element;jpvs.showDimScreen.element=null;c.fadeOut(b!=null?b:250,function(){c.remove()})}};jpvs.fitInWindow=function(d){if(!d){return}d=a(d);var j=d.offset();var r=j.left;var s=j.top;var l=d.outerWidth();var e=d.outerHeight();var n=$(window);var p=n.scrollLeft();var q=n.scrollTop();var o=n.width();var m=n.height();var b=k(p,p+o,r,r+l);var c=k(q,q+m,s,s+e);if(b!=0||c!=0){var f=r+b;var g=s+c;d.show().css({position:"absolute",left:f+"px",top:g+"px"})}function k(t,h,v,u){if(v<t){return t-v}else{if(u>h){return h-u}else{return 0}}}};jpvs.fixTableHeader=function(g){if(!g){return}g=a(g);var o=g;while(true){o=o.parent();var s=o[0].nodeName;if(!o||o.length==0||o[0].nodeName.toLowerCase()=="body"){o=null;break}else{var m=o.css("overflow");if(m=="auto"||m=="scroll"||m=="hidden"){break}}}var e=[];g.find("tbody > tr:first").each(function(){$(this).children("td").each(function(u,v){e[u]=$(v).outerWidth()})});var r=0;$.each(e,function(v,u){r+=u});g.css({"table-layout":"fixed",width:r+"px"});g.children("colgroup, col").remove();var d=jpvs.writeTag(g,"colgroup");$.each(e,function(v,u){jpvs.writeTag(d,"col").css("width",u+"px")});var j=g.clone().attr("id",g.attr("id")+"_header");j.insertBefore(g);j.children("tbody, tfoot").remove();g.children("caption, thead").remove();j.css("margin-bottom","0px");g.css("margin-top","0px");var k=jpvs.writeTag(g.parent(),"div");k.insertBefore(g);k.css({width:r+"px",height:j.outerHeight()+"px"});var t;var b,c;l();(o||$(window)).resize(l).scroll(n);var f=false;return{refresh:function(){l()},deactivate:function(){f=true;k.remove();var v=j.children("thead");var u=g.children("tbody");v.insertBefore(u);g.css("margin-top",j.css("margin-top"));j.remove()}};function l(){if(f){return}q();var v=o&&o.css("position");var u=(v=="absolute"||v=="fixed"||v=="relative");var x=j.position().left;var z=j.position().top;var A=0;if(o){if(!u){A=o.position().top}x+=o.scrollLeft();z+=o.scrollTop()}t=z-A;var w=parseFloat(j.css("margin-left"))+parseFloat(j.css("border-left-width"));var y=parseFloat(j.css("margin-top"))+parseFloat(j.css("border-top-width"));c=function(){if(o){if(u){return o.scrollTop()-y}else{return A-y}}else{return $(window).scrollTop()-y}};b=function(){if(o){return x}else{return x}};n()}function h(){var u=o||$(window);return{top:u.scrollTop(),left:u.scrollLeft()}}function n(){if(f){return}var u=h();if(u.top>t){p()}else{q()}}function q(){k.hide();j.css({position:"static"})}function p(){k.show();j.css({position:"absolute",top:c()+"px",left:b()+"px","z-index":99999})}}})();jpvs.Event=function(b){var a=function(d,c){return a.bind(d,c)};a.bind=jpvs.Event.prototype.bind;a.unbind=jpvs.Event.prototype.unbind;a.fire=jpvs.Event.prototype.fire;a.widget=b;a.handlers={};return a};jpvs.Event.prototype.bind=function(b,a){if(!a){a=b;b=new Date().toString()}this.handlers[b]=a;return this.widget};jpvs.Event.prototype.unbind=function(a){delete this.handlers[a];return this.widget};jpvs.Event.prototype.fire=function(k,d,f,a){if(d){return b(this.handlers[d])}else{var g=true;for(var e in this.handlers){var c=this.handlers[e];var j=b(c);g=g&&j}return g}function b(h){if(h){if(k){k.currentBrowserEvent=a}var l=h.call(k,f);if(k){k.currentBrowserEvent=null}return l}}};(function(){jpvs.parseJSON=function(d){return $.parseJSON(d)};var a=/["\\\x00-\x1f\x7f-\x9f]/g,b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};jpvs.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(n){if(n===null){return"null"}var s=typeof n;if(s==="undefined"){return undefined}if(s==="number"||s==="boolean"){return""+n}if(s==="string"){return c(n)}if(s==="object"){if(typeof n.toJSON==="function"){return jpvs.toJSON(n.toJSON())}if(n.constructor===Date){var l=n.getUTCMonth()+1,d=n.getUTCDate(),u=n.getUTCFullYear(),e=n.getUTCHours(),j=n.getUTCMinutes(),r=n.getUTCSeconds(),h=n.getUTCMilliseconds();if(l<10){l="0"+l}if(d<10){d="0"+d}if(e<10){e="0"+e}if(j<10){j="0"+j}if(r<10){r="0"+r}if(h<100){h="0"+h}if(h<10){h="0"+h}return'"'+u+"-"+l+"-"+d+"T"+e+":"+j+":"+r+"."+h+'Z"'}if(n.constructor===Array){var q=[];for(var f=0;f<n.length;f++){q.push(jpvs.toJSON(n[f])||"null")}return"["+q.join(",")+"]"}var m,t,p=[];for(var g in n){s=typeof g;if(s==="number"){m='"'+g+'"'}else{if(s==="string"){m=c(g)}else{continue}}s=typeof n[g];if(s==="function"||s==="undefined"){continue}t=jpvs.toJSON(n[g]);p.push(m+":"+t)}return"{"+p.join(",")+"}"}};function c(d){if(d.match(a)){return'"'+d.replace(a,function(e){var f=b[e];if(typeof f==="string"){return f}f=e.charCodeAt();return"\\u00"+Math.floor(f/16).toString(16)+(f%16).toString(16)})+'"'}return'"'+d+'"'}})();(function(){var a=["p","th","td"];(function(b){b.fn.htmlClean=function(z){return this.each(function(){var A=b(this);if(this.value){this.value=b.htmlClean(this.value,z)}else{this.innerHTML=b.htmlClean(this.innerHTML,z)}})};b.htmlClean=function(G,J){J=b.extend({},b.htmlClean.defaults,J);var T=/<(\/)?(\w+:)?([\w]+)([^>]*)>/gi;var B=/(\w+)=(".*?"|'.*?'|[^\s>]*)/gi;var S;var N=new e();var O=[N];var E=N;var K=false;if(J.bodyOnly){if(S=/<body[^>]*>((\n|.)*)<\/body>/i.exec(G)){G=S[1]}}G=G.concat("<xxx>");var I;while(S=T.exec(G)){var P=new n(S[3],S[1],S[4],J);var U=G.substring(I,S.index);if(U.length>0){var D=E.children[E.children.length-1];if(E.children.length>0&&j(D=E.children[E.children.length-1])){E.children[E.children.length-1]=D.concat(U)}else{E.children.push(U)}}I=T.lastIndex;if(P.isClosing){if(k(O,[P.name])){O.pop();E=O[O.length-1]}}else{var F=new e(P);var A;while(A=B.exec(P.rawAttributes)){if(A[1].toLowerCase()=="style"&&J.replaceStyles){var L=!P.isInline;for(var H=0;H<J.replaceStyles.length;H++){if(J.replaceStyles[H][0].test(A[2])){if(!L){P.render=false;L=true}E.children.push(F);O.push(F);E=F;P=new n(J.replaceStyles[H][1],"","",J);F=new e(P)}}}if(P.allowedAttributes!=null&&(P.allowedAttributes.length==0||b.inArray(A[1],P.allowedAttributes)>-1)){F.attributes.push(new d(A[1],A[2]))}}b.each(P.requiredAttributes,function(){var V=this.toString();if(!F.hasAttribute(V)){F.attributes.push(new d(V,""))}});for(var M=0;M<J.replace.length;M++){for(var R=0;R<J.replace[M][0].length;R++){var C=typeof(J.replace[M][0][R])=="string";if((C&&J.replace[M][0][R]==P.name)||(!C&&J.replace[M][0][R].test(S))){P.render=false;E.children.push(F);O.push(F);E=F;P=new n(J.replace[M][1],S[1],S[4],J);F=new e(P);F.attributes=E.attributes;M=J.replace.length;break}}}var z=true;if(!E.isRoot){if(E.tag.isInline&&!P.isInline){z=false}else{if(E.tag.disallowNest&&P.disallowNest&&!P.requiredParent){z=false}else{if(P.requiredParent){if(z=k(O,P.requiredParent)){E=O[O.length-1]}}}}}if(z){E.children.push(F);if(P.toProtect){while(tagMatch2=T.exec(G)){var Q=new n(tagMatch2[3],tagMatch2[1],tagMatch2[4],J);if(Q.isClosing&&Q.name==P.name){F.children.push(RegExp.leftContext.substring(I));I=T.lastIndex;break}}}else{if(!P.isSelfClosing&&!P.isNonClosing){O.push(F);E=F}}}}}return b.htmlClean.trim(l(N,J).join(""))};b.htmlClean.defaults={bodyOnly:true,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:false,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]]};function c(z,B,C,A){if(!z.tag.isInline&&C.length>0){C.push("\n");for(i=0;i<A;i++){C.push("\t")}}}function l(A,F){var G=[],B=A.attributes.length==0,D;var E=this.name.concat(A.tag.rawAttributes==undefined?"":A.tag.rawAttributes);var I=A.tag.render&&(F.allowedTags.length==0||b.inArray(A.tag.name,F.allowedTags)>-1)&&(F.removeTags.length==0||b.inArray(A.tag.name,F.removeTags)==-1);if(!A.isRoot&&I){G.push("<");G.push(A.tag.name);b.each(A.attributes,function(){if(b.inArray(this.name,F.removeAttrs)==-1){var K=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value);var L=K[2];var M=K[1]||'"';if(this.name=="class"){L=b.grep(L.split(" "),function(N){return b.grep(F.allowedClasses,function(O){return O[0]==N&&(O.length==1||b.inArray(A.tag.name,O[1])>-1)}).length>0}).join(" ");M='"'}if(L!=null&&(L.length>0||b.inArray(this.name,A.tag.requiredAttributes)>-1)){G.push(" ");G.push(this.name);G.push("=");G.push(M);G.push(L);G.push(M)}}})}if(A.tag.isSelfClosing){if(I){G.push(" />")}B=false}else{if(A.tag.isNonClosing){B=false}else{if(!A.isRoot&&I){G.push(">")}var D=F.formatIndent++;if(A.tag.toProtect){var H=b.htmlClean.trim(A.children.join("")).replace(/<br>/ig,"\n");G.push(H);B=H.length==0}else{var H=[];for(var C=0;C<A.children.length;C++){var z=A.children[C];var J=b.htmlClean.trim(x(j(z)?z:z.childrenToString()));if(h(z)){if(C>0&&J.length>0&&(m(z)||f(A.children[C-1]))){H.push(" ")}}if(j(z)){if(J.length>0){H.push(J)}}else{if(C!=A.children.length-1||z.tag.name!="br"){if(F.format){c(z,F,H,D)}H=H.concat(l(z,F))}}}F.formatIndent--;if(H.length>0){if(F.format&&H[0]!="\n"){c(A,F,G,D)}G=G.concat(H);B=false}}if(!A.isRoot&&I){if(F.format){c(A,F,G,D-1)}G.push("</");G.push(A.tag.name);G.push(">")}}}if(!A.tag.allowEmpty&&B){return[]}return G}function k(A,B,z){z=z||1;if(b.inArray(A[A.length-z].tag.name,B)>-1){return true}else{if(A.length-(z+1)>0&&k(A,B,z+1)){A.pop();return true}}return false}function e(z){if(z){this.tag=z;this.isRoot=false}else{this.tag=new n("root");this.isRoot=true}this.attributes=[];this.children=[];this.hasAttribute=function(B){for(var A=0;A<this.attributes.length;A++){if(this.attributes[A].name==B){return true}}return false};this.childrenToString=function(){return this.children.join("")};return this}function d(z,A){this.name=z;this.value=A;return this}function n(D,B,F,E){this.name=D.toLowerCase();this.isSelfClosing=b.inArray(this.name,w)>-1;this.isNonClosing=b.inArray(this.name,t)>-1;this.isClosing=(B!=undefined&&B.length>0);this.isInline=b.inArray(this.name,s)>-1;this.disallowNest=b.inArray(this.name,r)>-1;this.requiredParent=v[b.inArray(this.name,v)+1];this.allowEmpty=b.inArray(this.name,o)>-1;this.toProtect=b.inArray(this.name,u)>-1;this.rawAttributes=F;this.requiredAttributes=q[b.inArray(this.name,q)+1];if(E){if(!E.tagAttributesCache){E.tagAttributesCache=[]}if(b.inArray(this.name,E.tagAttributesCache)==-1){var A=p[b.inArray(this.name,p)+1].slice(0);for(var C=0;C<E.allowedAttributes.length;C++){var z=E.allowedAttributes[C][0];if((E.allowedAttributes[C].length==1||b.inArray(this.name,E.allowedAttributes[C][1])>-1)&&b.inArray(z,A)==-1){A.push(z)}}E.tagAttributesCache.push(this.name);E.tagAttributesCache.push(A)}this.allowedAttributes=E.tagAttributesCache[b.inArray(this.name,E.tagAttributesCache)+1]}this.render=true;return this}function m(z){while(g(z)&&z.children.length>0){z=z.children[0]}return j(z)&&z.length>0&&b.htmlClean.isWhitespace(z.charAt(0))}function f(z){while(g(z)&&z.children.length>0){z=z.children[z.children.length-1]}return j(z)&&z.length>0&&b.htmlClean.isWhitespace(z.charAt(z.length-1))}function j(z){return z.constructor==String}function h(z){return j(z)||z.tag.isInline}function g(z){return z.constructor==e}function x(z){return z.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}b.htmlClean.trim=function(z){return b.htmlClean.trimStart(b.htmlClean.trimEnd(z))};b.htmlClean.trimStart=function(z){return z.substring(b.htmlClean.trimStartIndex(z))};b.htmlClean.trimStartIndex=function(A){for(var z=0;z<A.length-1&&b.htmlClean.isWhitespace(A.charAt(z));z++){}return z};b.htmlClean.trimEnd=function(z){return z.substring(0,b.htmlClean.trimEndIndex(z))};b.htmlClean.trimEndIndex=function(A){for(var z=A.length-1;z>=0&&b.htmlClean.isWhitespace(A.charAt(z));z--){}return z+1};b.htmlClean.isWhitespace=function(z){return b.inArray(z,y)!=-1};var s=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","small","span","strike","strong","sub","sup","tt","u","var"];var r=["h1","h2","h3","h4","h5","h6","p","th","td"];var o=a||["th","td"];var v=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"]];var u=["script","style","pre","code"];var w=["br","hr","img","link","meta"];var t=["!doctype","?xml"];var p=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"font",["face","size","color"],"form",["accept","action","class","enctype","method","name"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"]];var q=[[],"img",["alt"]];var y=["ย"," ","\t","\n","\r","\f"]})(jQuery);jpvs.cleanHtml=function(c,d){var b={bodyOnly:false,allowedTags:["h1","h2","h3","h4","h5","h6","br","hr","div","span","img","p","font","ul","ol","li","i","em","b","strong","u","sup","sub","table","thead","tbody","tfoot","tr","td","th"],removeTags:[null],allowedAttributes:[["style"],["align"],["src",["img"]]],removeAttrs:[],allowedClasses:[],format:false,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]]};return jQuery.htmlClean(c||"",d||b)};jpvs.stripHtml=function(b){var c={bodyOnly:false,allowedTags:[null],removeTags:[],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:false,formatIndent:0,replace:[],replaceStyles:[]};return jQuery.htmlClean(b||"",c)}})();var SvgParser=(function(){var b={r:0,g:0,b:0,a:1};var c={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",green:"#008000",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function g(l){var k=XmlParser.parseString(l,h);if(k){return{ids:k.__$ids$__,elements:k.children}}else{return null}}function h(n,u){if(!u.__$ids$__){u.__$ids$__={}}if(n.attributes.id){u.__$ids$__[n.attributes.id]=n}for(var m=0;m<n.children.length;m++){var l=n.children[m];if(l.name=="#COMMENT"){n.children.splice(m--,1)}}delete n.value;for(var m in n.attributes){var k=n.attributes[m];p(n,m,k)}delete n.attributes;function p(v,x,y){if(x=="style"){t(v,y)}else{if(x=="fill"){q(v,y)}else{if(x=="stroke"){s(v,y)}else{if(x=="d"){r(v,y)}else{var w=/%$/g.test(y);var z=parseFloat(y);var A=isFinite(z)&&!w;v[x]=A?z:y}}}}}function r(v,x){var w=f(x);v.d=w}function q(w,F){if(!F){w.fill={};return}F=j(F);if(F==""||F.toLowerCase()=="none"){w.fill={};return}var E=/^url *\( *#(.+) *\) *$/gi;var C=E.exec(F);if(C){var y=C[1];var x=u.__$ids$__[y];if(x.name=="linearGradient"){var G=o(x.x1);var H=o(x.x2);var I=o(x.y1);var J=o(x.y2);w.fill={linearGradient:{x1:G,y1:I,x2:H,y2:J,stops:[]}};for(var z in x.children){var D=x.children[z];if(D.name!="stop"){continue}var A=D.offset;var v=e(D["stop-color"]);var B=D["stop-opacity"];if(B!=null){v.a*=B}w.fill.linearGradient.stops.push({color:v,offset:A})}}else{}}else{w.fill={color:e(F)}}}function o(v){if(/%$/g.test(v)){return parseFloat(v.substring(0,v.length-1))/100}else{return parseFloat(v)}}function s(v,w){if(!w){v.stroke={};return}w=j(w);if(w==""||w.toLowerCase()=="none"){v.stroke={};return}v.stroke={color:e(w)}}function t(v,C){C=j(C);var y=C.split(";");for(var w in y){var x=y[w];var B=x.split(":");var z=j(B[0]);var A=j(B[1]);p(v,z,A)}}}function j(k){return k.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function e(k){if(!k){return b}k=j(k);if(k==""){return b}if((/^#/gi).test(k)){return l(k.substring(1))}else{if((/^RGB[^A]/gi).test(k)){return n(k.substring(3))}else{if((/^RGBA/gi).test(k)){return m(k.substring(4))}else{k=k.toLowerCase();k=c[k];return e(k)}}}function l(o){o=j(o);if(o.length==3){o=String.fromCharCode(o.charCodeAt(0),o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(2))}return{r:parseInt(o.substring(0,2),16),g:parseInt(o.substring(2,4),16),b:parseInt(o.substring(4,6),16),a:1}}function n(q){q=j(q);if((/^\(.*\)$/gi).test(q)){q=q.substring(1,q.length-1);var t=j(q).split(",");var u=parseInt(t[0]);var s=parseInt(t[1]);var p=parseInt(t[2]);var o=1;return{r:u,g:s,b:p,a:o}}else{return b}}function m(q){q=j(q);if((/^\(.*\)$/gi).test(q)){q=q.substring(1,q.length-1);var t=j(q).split(",");var u=parseInt(t[0]);var s=parseInt(t[1]);var p=parseInt(t[2]);var o=parseFloat(t[3]);return{r:u,g:s,b:p,a:o}}else{return b}}}var d="1234567890.-+";var a="qwertyuioplkjhgfdsazxcvbnmQWERTYUIOPLKJHGFDSAZXCVBNM";function f(o){if(!o){return null}o=j(o);if(o==""){return null}var s=0;var r=1;var q=2;var l=[];var m,n;var t=s;for(var p=0;p<o.length;p++){var k=o[p];if(t==s){if(a.indexOf(k)>=0){m={cmd:k,params:[]};l.push(m);t=r}else{}}else{if(t==r){if(a.indexOf(k)>=0){m={cmd:k,params:[]};l.push(m);t=r}else{if(d.indexOf(k)>=0){n=k;t=q}else{}}}else{if(t==q){if(d.indexOf(k)>=0){n+=k}else{if(a.indexOf(k)>=0){m.params.push(parseFloat(n));n=null;m={cmd:k,params:[]};l.push(m);t=r}else{m.params.push(parseFloat(n));n=null;t=r}}}}}}if(n){m.params.push(parseFloat(n))}return l}return{parseString:g,parseColor:e,parsePathDefinition:f}})();var XmlParser=(function(){var f=0,h=1,k=2,a=3,l=4,b=5,m=6,c=7;function j(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function d(){return{name:"",attributes:{},children:[],value:null}}function e(n){return{name:"#TEXT",attributes:{},children:[],value:n}}function g(A,x,z){if(!A||A==""){return null}var B=f;var w=[];var r,o,p,t="",q="";for(var v=0;v<A.length;v++){var n=A[v];if(B==f){if(n=="<"){B=h;if(!z){t=j(t)}if(t.length>0){var C=e(t);r.children.push(C)}t="";var y=r;r=d();w.push(r);if(y){y.children.push(r)}}else{t+=n}}else{if(B==h){if(n==" "){B=k}else{if(n=="/"){if(r.name==""){r.closing=true}else{B=m}}else{if(n==">"){B=f;if(r.closing){if(w.length>1){w.pop();r=w[w.length-1];r.children.pop()}if(w.length>1){w.pop();r=w[w.length-1]}}else{}}else{r.name+=n;if(r.name=="!--"){q="";B=c}}}}}else{if(B==k){if(n==" "){}else{if(n=="/"){B=m}else{if(n==">"){B=f}else{B=a;o=n;p=""}}}}else{if(B==a){if(n=="="){B=l}else{o+=n}}else{if(B==l){if(n==" "){}else{if(n=='"'){B=b}else{D()}}}else{if(B==b){if(n=='"'){B=k;r.attributes[j(o)]=p}else{p+=n}}else{if(B==m){if(n==" "){}else{if(n==">"){B=f;if(w.length>1){w.pop();r=w[w.length-1]}}else{D()}}}else{if(B==c){q+=n;if((/-->$/gi).test(q)){q=j(q.substring(0,q.length-3));r.name="#COMMENT";r.value=q;w.pop();r=w[w.length-1];B=f}}else{E()}}}}}}}}}var u=w[0]||null;if(x){F(u)}return u;function F(H){if(H){x(H,u);if(H.children){for(var G in H.children){var s=H.children[G];F(s)}}}}function D(){throw"Invalid character: "+n}function E(){throw"Unexpected parser state: "+B}}return{parseString:g}})();(function(){var a="QWERTYUIOPLKJHGFDSAZXCVBNM1234567890";var c=a.length;var b=10*c;jpvs.randomString=function(g){var h="";for(var f=0;f<g;f++){var d=Math.floor(Math.random()*b)%c;var e=a[d];h+=e}return h}})();jpvs.Resources={images:{loading:"data:image/gif;base64,R0lGODlhGAAIAPcAAAAAAP8A3ICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgABACwAAAAAGAAIAAAIRAADCBxIsKBBggASKhSocGGAhgkZCpgoAADDARgHWHyYUaNEihsBdAw58uNEkhlRYgxJseLFlC9XMoQ4s2FNhwdz5gwIACH5BAkKAAEALAAAAAAYAAgAAAhDAAMIHEiwoEGCABIqFKhwYYCGCRkOmDgAAEMBGAVYfEixokSKGwFk1PhxYsiOIUeeBFnS40OVLUNCZDjzYc2DOHEGBAAh+QQJCgABACwAAAAAGAAIAAAIQwADCBxIsKBBggASKhSocGGAhgkZDpg4AIBEihYfCtgoICMAihUvTvTIsaPIkA9BkuToUeXJlRs9QmQ482HNgzhxBgQAIfkECQoAAQAsAAAAABgACAAACEMAAwgcSLCgQYIAEioUqHBhgIYJGQ6YOAAAQwEYBVh8SLGiRIobAWTU+HFiyI4hR54EWdLjQ5UtQ0JkOPNhzYM4cQYEADs=",closeButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADzSURBVDhPY2BmZv7EwMDwn1zMyMrK+uXnz5/7gQaQDJiYmHyYSNaFpgHDAD09PSuQyRcvXuRCVtvW1iYHEgfRKGaAvPDv37/NyBgUHjo6Om9hYufPn98LEmtpabmIrg6rF1avXn38ypUrQjDbYmNjDYAGvquqqnqE4WVsLgDZEhUVdQ9kK4wGuQKbS/HGAig8QC4BuSg4OPgtuu0EYwGkGaRp/fr1ErhiC2c0gmwH+Rtk+7JlyxTXrl0rjNUQbGEACm2Q/2H+hoUDtjBgQDcAX5QhRy3IMHDyRzYAphldIUgx0CvHYLECcwmIP/B5gYHS7AwAM9IzlWy9T8kAAAAASUVORK5CYII=",closeButtonHover:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVDhPY9TW1v6rqqrKxEAGuHHjBgOjo6Pjn717994lQz+Dk5OTGlk2I1uGYcDs2bNlm5qa1N6+fcuKrPDUqVP8IHEQjdeA1NTUxyAF69atk4ApBBm2Y8cOcQ8Pj5dmZmYf8RoAkoyMjHzy/PlzTphtIMMkJSW/o2sGqcUaBsBY+WZkZPQBZOuWLVvEQIYFBQW9wBbQOAPRx8fnFcjWc+fOCYBcJCws/JskA0CKQTaD6Js3b/LgimacLgDFBsgFINtBrrh9+zYX0S4ABR7M37DwWL58uQxRBiBHGczfoPAAaQa5Ct0QFC+ANE+dOlURW5TBohYUK8iGDHxeYFRRUfkrIyNDVqZ68OABAwDuhIRQ92DTiAAAAABJRU5ErkJggg==",subMenuMarker:"data:image/gif;base64,R0lGODlhBAAHAPAAAAAAAP///yH5BAEAAAEALAAAAAAEAAcAAAIIRA4WaeyrVCgAOw==",dataGridColumnButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAICAYAAAArzdW1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAP0lEQVQoU2NsaGjYwkAIgBT9//8/ChcGGwI1CWQaVgxXBDIFmyKQOIoidIUw6zEUwRQiuw+rInQPwBWBGPgwACtpkpAwaQ17AAAAAElFTkSuQmCC",dataGridColumnButtonHover:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAICAYAAAArzdW1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAPklEQVQoU2NsaGj4z0AIgBQBAYjAisGGQE0CmYYVwxWBTMGmCCSOoghdIcx6DEUwhcjuw6oI3QNwRSAGPgwAytOhjjbmr7UAAAAASUVORK5CYII=",moveButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAADlSURBVHjapFLRDsIgDLxuU598WvgAfdXo/3+Xr7BaGDDoGDGxySUb9NrrFQLu2IIFSwEnB44EqGHDPbPFAMh9QCJzJp/My39zUTCT129gWjtXXSPJSfVMkH9Lmoy19a1VIMkV4kdyzmqEODCzV6CJSyN5T04xKdkNw6DJHE0LMcSuvCUdKaiCiwLe7Tcu2XGXcQ1nITljNk/M5pGLiBST9o3GCHI+klKQupM3MY7giVr6oXwoD9JuLfXcbpHjFlzzhf0aw0berSoYVhjYK5AeUC2TNh51RIw9hdy9lC2EVfwTXwEGAJ3OoklJmLc2AAAAAElFTkSuQmCC",nodeClosed:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNtCDrVoAAABrSURBVDhP7ZI9CsAgDEY9fM7g6iReJYcIuAXUwSN8kkLHgj+FLs0cHo+XOPfPYwFmRu8d24lijEgpIee8BzFArRUhBIjIOsQApl9KgfcerbU1yA0wiKqCiC6j6SavGBw3OLrC8R9Mx/p8cQCaS2KwCQA20AAAAABJRU5ErkJggg==",nodeOpen:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNtCDrVoAAABCSURBVDhPY2AYBfQJgV27dv3v6Oj4T5ZtIM1qampgTLIBMM2RkZGkG4CsmWQD0DWTbAAowGD+htFkByLJATcCNQAAuT01LwirJNQAAAAASUVORK5CYII=",nodeNoChildren:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNtCDrVoAAABlSURBVDhP7ZAxCoAhCIW7/zl0ChcHIQiiwQt0IX9sCNoy+LcEF/F9Pl9Kr/5JgIgMAAwRV4uIHV9zYSllCcYYExQC+HKt1VR1Cq8ALmbmO0BrbVnuvcdeyDlvAbp9nx1n8BZjCXzXd1UGM4buRAAAAABJRU5ErkJggg==",down:"data:image/png;base64,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",minus:"data:image/png;base64,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",plus:"data:image/png;base64,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",up:"data:image/png;base64,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"}};(function(){var a="jpvs.SessionID";var b;jpvs.getSessionID=function(){if(!b){try{b=sessionStorage[a]}catch(c){}}if(!b){b=jpvs.randomString(50);try{sessionStorage[a]=b}catch(c){}}return b}})();(function(){var e="jpvs.Storage.";var f=e.length;function d(n,k,j){var m=n[e+k];if(!m){return j}var l=$.parseJSON(m);return l}function h(m,j,k){var l=jpvs.toJSON(k);m[e+j]=l}function g(k,j){k.removeItem(e+j)}function b(o,j){var n=o.length;for(var l=0;l<n;l++){var k=o.key(l);if(k.indexOf(e)!=0){continue}var m=k.substring(f);var q=o.getItem(m);var p=$.parseJSON(q);if(j(m,p)===false){return}}}function c(j,k){return j+"."+k}function a(k,j){this.storage=k;this.id=j.id;this.name=j.name}a.prototype.getCount=function(){if(this.deleted){return 0}var k=this.name+".";var l=k.length;var j=0;b(this.storage,function(n,p){if(n.indexOf(k)==0){var m=n.substring(l);var o=parseInt(m);if(isFinite(o)){j=Math.max(j,o+1)}}});return j};a.prototype.getItem=function(k){if(this.deleted){return null}var l=c(this.name,k);var j=d(this.storage,l,null);return j};a.prototype.setItem=function(k,j){if(this.deleted){return}var l=c(this.name,k);h(this.storage,l,j)};a.prototype.removeItem=function(j){if(this.deleted){return}var k=c(this.name,j);g(this.storage,k)};a.prototype.removeAllItems=function(){if(this.deleted){return}var k=this.getCount();for(var j=0;j<k;j++){this.removeItem(j)}};a.prototype.listItems=function(){if(this.deleted){return[]}var j=[];this.each(function(k,l){j.push(l)});return j};a.prototype.each=function(j){if(this.deleted){return}var l=this.getCount();for(var k=0;k<l;k++){if(j(k,this.getItem(k))===false){return}}};a.prototype.deleteDomain=function(){if(this.deleted){return}this.removeAllItems();var j=d(this.storage,"Domains",{});delete j[this.id];h(this.storage,"Domains",j);this.deleted=true};jpvs.Storage={listDomains:function(l){var j=d(l,"Domains",{});var k=[];$.each(j,function(n,m){k.push(new a(l,m))});return k},getDomain:function(o,j){var k=d(o,"Domains",{});var l;$.each(k,function(q,p){if(p.name==j){l=new a(o,p);return false}});if(l){return l}var m={id:jpvs.randomString(20),name:j};var n=new a(o,m);k[m.id]=m;h(o,"Domains",k);return n}}})();(function(){jpvs.equals=function(c,d){if(c===d){return true}if(c===null&&d===null){return true}else{if(c===null&&d!==null){return false}else{if(c!==null&&d===null){return false}}}if(c===undefined&&d===undefined){return true}else{if(c===undefined&&d!==undefined){return false}else{if(c!==undefined&&d===undefined){return false}}}if(c===true&&d===true){return true}else{if(c===true&&d!==true){return false}else{if(c!==true&&d===true){return false}}}if(c===false&&d===false){return true}else{if(c===false&&d!==false){return false}else{if(c!==false&&d===false){return false}}}if(typeof(c)!=typeof(d)){return false}if(typeof(c)=="number"){if(isNaN(c)&&isNaN(d)){return true}else{if(isNaN(c)&&!isNaN(d)){return false}else{if(!isNaN(c)&&isNaN(d)){return false}}}return c==d}if(typeof(c)=="string"){return c==d}if(c.length!==undefined&&d.length!==undefined){return a(c,d)}else{if(c.length!==undefined&&d.length===undefined){return false}else{if(c.length===undefined&&d.length!==undefined){return false}else{return b(c,d)}}}};function a(d,f){if(d.length!=f.length){return false}for(var c=0;c<d.length;c++){var e=d[c];var g=f[c];if(!jpvs.equals(e,g)){return false}}return true}function b(e,g){if(e.getTime&&g.getTime){return e.getTime()==g.getTime()}else{if(!e.getTime&&g.getTime){return false}else{if(e.getTime&&!g.getTime){return false}}}var c={};for(var d in e){var f=e[d];var h=g[d];if(!jpvs.equals(f,h)){return false}c[d]=true}for(var d in g){if(c[d]){continue}var f=e[d];var h=g[d];if(!jpvs.equals(f,h)){return false}}return true}})();jpvs.Button=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.Button,type:"Button",cssClass:"Button",create:function(a){var b=document.createElement("button");$(b).attr("type","button");$(a).append(b);return b},init:function(a){this.element.click(function(){return a.click.fire(a)})},canAttachTo:function(a){return $(a).is('button,input[type="button"]')},prototype:{text:jpvs.property({get:function(){return this.element.text()},set:function(a){this.element.text(a)}})}});jpvs.writeButtonBar=function(c,b){if(!c){return}if(!b){return}c=jpvs.getElementIfWidget(c);var a=$(document.createElement("div"));$(a).addClass("ButtonBar").appendTo(c);$.each(b,function(f,e){var d=jpvs.Button.create(a);d.text(e.text||"OK").click.bind(e.click)});return a};jpvs.CheckBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.CheckBox,type:"CheckBox",cssClass:"CheckBox",create:function(a){var b=document.createElement("input");$(b).attr("type","checkbox");$(a).append(b);return b},init:function(a){this.element.click(function(){return a.change.fire(a)});this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="checkbox"]')},prototype:{checked:jpvs.property({get:function(){return this.element.prop("checked")},set:function(a){this.element.prop("checked",a?true:false)}}),text:jpvs.property({get:function(){this.ensureId();var a=$('label[for="'+this.id()+'"]');return a.text()},set:function(b){this.ensureId();var a=$('label[for="'+this.id()+'"]');if(a.length==0){a=$(document.createElement("label"));a.attr("for",this.id());a.insertAfter(this.element)}a.text(b)}})}});(function(){jpvs.DataGrid=function(p){this.attach(p);this.dataItemClick=jpvs.event(this);this.changedSortFilter=jpvs.event(this)};jpvs.DataGrid.allStrings={en:{clickToSortAndFilter:"Click here for sorting/filtering options",clickToSort:"Click here for sorting options",clickToFilter:"Click here for filtering options",titleSortAndFilter:"Sorting/filtering options",titleSort:"Sorting options",titleFilter:"Filtering options",ok:"OK",cancel:"Cancel",orderBy:"Order by",thenBy:"Then by",descending:"Descending",op_EQ:"is equal to",op_NEQ:"is not equal to",op_CONTAINS:"contains",op_NCONTAINS:"does not contain",op_STARTS:"starts with",op_NSTARTS:"does not start with",op_LT:"is less than",op_LTE:"is less than or equal to",op_GT:"is greater than",op_GTE:"is greater than or equal to"},it:{clickToSortAndFilter:"Clicca qui per ordinare/filtrare i dati",clickToSort:"Clicca qui per ordinare i dati",clickToFilter:"Clicca qui per filtrare i dati",titleSortAndFilter:"Ordinamento/filtro",titleSort:"Ordinamento",titleFilter:"Filtro",ok:"OK",cancel:"Annulla",orderBy:"Ordina per",thenBy:"Poi per",descending:"Ordine inverso",op_EQ:"รจ uguale a",op_NEQ:"รจ diverso da",op_CONTAINS:"contiene",op_NCONTAINS:"non contiene",op_STARTS:"inizia per",op_NSTARTS:"non inizia per",op_LT:"รจ minore di",op_LTE:"รจ minore o uguale a",op_GT:"รจ maggiore di",op_GTE:"รจ maggiore o uguale a"}};jpvs.DataGrid.getFilteringOperands=function(){return[{value:"EQ",text:jpvs.DataGrid.strings.op_EQ},{value:"NEQ",text:jpvs.DataGrid.strings.op_NEQ},{value:"CONTAINS",text:jpvs.DataGrid.strings.op_CONTAINS},{value:"NCONTAINS",text:jpvs.DataGrid.strings.op_NCONTAINS},{value:"STARTS",text:jpvs.DataGrid.strings.op_STARTS},{value:"NSTARTS",text:jpvs.DataGrid.strings.op_NSTARTS},{value:"LT",text:jpvs.DataGrid.strings.op_LT},{value:"LTE",text:jpvs.DataGrid.strings.op_LTE},{value:"GT",text:jpvs.DataGrid.strings.op_GT},{value:"GTE",text:jpvs.DataGrid.strings.op_GTE}]};jpvs.makeWidget({widget:jpvs.DataGrid,type:"DataGrid",cssClass:"DataGrid",create:function(p){var q=document.createElement("table");$(p).append(q);return q},init:function(p){jpvs.DataGrid.strings=jpvs.DataGrid.allStrings[jpvs.currentLocale()];this.element.on("click","tr",function(q){return m(p,q.currentTarget)});this.element.on("mouseenter","thead > tr",function(q){l(p,q.currentTarget)});this.element.on("mouseleave","thead > tr",function(q){k(p,q.currentTarget)})},canAttachTo:function(p){return false},prototype:{template:jpvs.property({get:function(){return this.element.data("template")},set:function(p){this.element.data("template",p)}}),emptyRowTemplate:jpvs.property({get:function(){return this.element.data("emptyRowTemplate")},set:function(p){this.element.data("emptyRowTemplate",p)}}),binder:jpvs.property({get:function(){return this.element.data("binder")},set:function(p){this.element.data("binder",p)}}),caption:jpvs.property({get:function(){var p=this.element.children("caption");if(p.length!=0){return p.text()}else{return null}},set:function(q){var p=this.element.children("caption");if(p.length==0){p=$(document.createElement("caption"));this.element.prepend(p)}p.text(q)}}),enableEvenOdd:jpvs.property({get:function(){var p=this.element.data("enableEvenOdd");if(p===true||p===false){return p}else{return true}},set:function(p){this.element.data("enableEvenOdd",p)}}),enableSorting:jpvs.property({get:function(){var p=this.element.data("enableSorting");if(p===true||p===false){return p}else{return false}},set:function(p){this.element.data("enableSorting",p)}}),enableFiltering:jpvs.property({get:function(){var p=this.element.data("enableFiltering");if(p===true||p===false){return p}else{return false}},set:function(p){this.element.data("enableFiltering",p)}}),sortAndFilterExpressions:jpvs.property({get:function(){var p=this.element.data("sortAndFilterExpressions");if(!p){p=[];this.element.find("thead > tr > th").each(function(){var q=$(this).text();p.push({value:q,text:q})})}return p},set:function(p){this.element.data("sortAndFilterExpressions",p)}}),currentSort:jpvs.property({get:function(){return this.element.data("currentSort")||null},set:function(p){this.element.data("currentSort",p)}}),currentFilter:jpvs.property({get:function(){return this.element.data("currentFilter")||null},set:function(p){this.element.data("currentFilter",p)}}),clear:function(){this.element.find("tr").remove();return this},dataBind:function(p){d(this,"tbody",p);return this},dataBindHeader:function(p){d(this,"thead",p);return this},dataBindFooter:function(p){d(this,"tfoot",p);return this},addBodyRow:function(q,p){var r="tbody";var s=g(this,r);var t=e(r);a(this,t,s,q,p);return this},addHeaderRow:function(q,p){var r="thead";var s=g(this,r);var t=e(r);a(this,t,s,q,p);return this},addFooterRow:function(q,p){var r="tfoot";var s=g(this,r);var t=e(r);a(this,t,s,q,p);return this},removeBodyRow:function(p){var q="tbody";var r=g(this,q);n(this,r,p);return this},removeHeaderRow:function(p){var q="thead";var r=g(this,q);n(this,r,p);return this},removeFooterRow:function(p){var q="tfoot";var r=g(this,q);n(this,r,p);return this},removeBodyRows:function(q,p){var r="tbody";var s=g(this,r);n(this,s,q,p);return this},removeHeaderRows:function(q,p){var r="thead";var s=g(this,r);n(this,s,q,p);return this},removeFooterRows:function(q,p){var r="tfoot";var s=g(this,r);n(this,s,q,p);return this}}});function d(s,r,q){var p=s.binder()||jpvs.DataGrid.defaultBinder;p.call(s,r,q)}function g(r,p){var q=r.element.children(p);if(q.length==0){q=$(document.createElement(p));r.element.append(q)}return q}function a(x,t,s,r,q){var v=$(document.createElement("tr"));if(q===null||q===undefined){s.append(v);if(x.enableEvenOdd()){o(-1,s)}}else{var w=s.children("tr");if(w.length==0){s.append(v)}else{w.eq(q).before(v)}if(x.enableEvenOdd()){o(q,s)}}var u=x.template();var p=x.emptyRowTemplate();if(u){b(v,t,u,p,r)}}function n(s,r,q,p){if(p===null||p===undefined){p=1}if(p==1){r.children("tr").eq(q).remove()}else{if(p>1){r.children("tr").slice(q,q+p).remove()}}if(s.enableEvenOdd()){o(q,r)}}function o(u,t){var s=t.children("tr");if(u<0){u+=s.length}var p=((u%2)==0);for(var q=u;q<s.length;q++){var r=s.eq(q);r.removeClass("Even Odd").addClass(p?"Even":"Odd");p=!p}}function e(p){if(p=="thead"){return"header"}else{if(p=="tfoot"){return"footer"}else{return"body"}}}function b(t,r,s,p,q){t.empty();if(q){$.each(s,function(y,x){var w=x;if(x.header||x.body||x.footer){w=x[r]}var v="td";if((w&&w.isHeader)||r=="header"||r=="footer"){v="th"}var u=$(document.createElement(v));t.append(u);jpvs.applyTemplate(u,w,q)});t.data("fromEmptyRowTemplate",false);t.data("dataItem",q)}else{jpvs.applyTemplate(t,p||c(s.length),q);t.data("fromEmptyRowTemplate",true)}}function c(p){return function(q){var r=jpvs.writeTag(this,"td").attr("colspan",p);jpvs.writeTag(r,"img").attr("src",jpvs.Resources.images.loading);jpvs.writeTag(r,"span",".").css("visibility","hidden")}}function m(q,r){var p=$(r).data("dataItem");if(p){return q.dataItemClick.fire(q,null,p)}}function l(t,v){var r=t.enableSorting();var q=t.enableFiltering();if(!r&&!q){return}var u="";if(r&&q){u=jpvs.DataGrid.strings.clickToSortAndFilter}else{if(r){u=jpvs.DataGrid.strings.clickToSort}else{if(q){u=jpvs.DataGrid.strings.clickToFilter}}}var s=t.sortAndFilterExpressions();var p=$(v).data("jpvsColButtons")||[];if(p.length==0){$(v).find("td,th").each(function(E){if(!s[E]){return}var z=$(this);var F=z.position();var H=F.left;var I=F.top;var G=z.innerWidth();var A=z.outerHeight();var D=I;var C=H+G;var B=jpvs.ImageButton.create(z).imageUrls({normal:jpvs.Resources.images.dataGridColumnButton,hover:jpvs.Resources.images.dataGridColumnButtonHover});C-=B.element.width();B.element.css({position:"absolute",left:C+"px",top:D+"px"}).attr("title",u);B.click(j(t,E));p.push(B)});$(v).data("jpvsColButtons",p)}}function k(q,r){var p=$(r).data("jpvsColButtons");if(p){setTimeout(function(){$.each(p,function(t,s){s.destroy()})},5000)}$(r).data("jpvsColButtons",null)}function j(q,p){return function(){h(q,p)}}function h(x,r){var u=x.enableSorting();var t=x.enableFiltering();if(!u&&!t){return}var K="";if(u&&t){K=jpvs.DataGrid.strings.titleSortAndFilter}else{if(u){K=jpvs.DataGrid.strings.titleSort}else{if(t){K=jpvs.DataGrid.strings.titleFilter}}}var D=jpvs.Popup.create().title(K).show();var q=u&&t;var C=D;var B=D;if(q){C=jpvs.writeTag(D,"fieldset");B=jpvs.writeTag(D,"fieldset");jpvs.writeTag(C,"legend",jpvs.DataGrid.strings.titleSort);jpvs.writeTag(B,"legend",jpvs.DataGrid.strings.titleFilter)}var G=[];if(u){var J=jpvs.Table.create(C);G.push(M(J,jpvs.DataGrid.strings.orderBy));G.push(M(J,jpvs.DataGrid.strings.thenBy));G.push(M(J,jpvs.DataGrid.strings.thenBy));G.push(M(J,jpvs.DataGrid.strings.thenBy));var H=x.currentSort();if(!H){var p=x.sortAndFilterExpressions();var s=p&&p[r]&&p[r].value;if(s){H=[{name:s}]}else{H=[]}}for(var y=0;y<G.length;y++){F(G[y],H[y])}}var v=[];if(t){var I=jpvs.Table.create(B);v.push(L(I));v.push(L(I));v.push(L(I));v.push(L(I));var w=x.currentFilter()||[];for(var y=0;y<v.length;y++){E(v[y],w[y])}}jpvs.writeButtonBar(D,[{text:jpvs.DataGrid.strings.ok,click:A},{text:jpvs.DataGrid.strings.cancel,click:z}]);D.close(z);function z(){D.destroy()}function A(){if(u){var W=[];for(var T=0;T<G.length;T++){var O=G[T].cmbSort;var N=G[T].chkDesc;var U=O.selectedValue();var R=N.checked();if(U&&U!=""){W.push({name:U,descending:R})}}x.currentSort(W)}if(t){var S=[];for(var T=0;T<v.length;T++){var P=v[T].cmbFilter;var Q=v[T].cmbOp;var X=v[T].txtValue;var U=P.selectedValue();var V=Q.selectedValue();var Y=X.text();if(U&&U!=""&&V&&V!=""){S.push({name:U,operand:V,value:Y})}}x.currentFilter(S)}x.changedSortFilter.fire(x);D.destroy()}function M(R,N){var Q=R.writeRow();Q.writeCell(N+": ");var P=jpvs.DropDownList.create(Q.writeCell());var O=jpvs.CheckBox.create(Q.writeCell());O.text(jpvs.DataGrid.strings.descending);P.addItem("");P.addItems(x.sortAndFilterExpressions());return{cmbSort:P,chkDesc:O}}function F(N,O){if(O){N.cmbSort.selectedValue(O.name);N.chkDesc.checked(O.descending)}}function L(R,N){var Q=R.writeRow();var O=jpvs.DropDownList.create(Q.writeCell());var P=jpvs.DropDownList.create(Q.writeCell());var S=jpvs.TextBox.create(Q.writeCell());O.addItem("");O.addItems(x.sortAndFilterExpressions());P.addItem("");P.addItems(jpvs.DataGrid.getFilteringOperands());return{cmbFilter:O,cmbOp:P,txtValue:S}}function E(N,O){if(O){N.cmbFilter.selectedValue(O.name);N.cmbOp.selectedValue(O.operand);N.txtValue.text(O.value)}}}function f(p){return{sort:p.currentSort(),filter:p.currentFilter()}}jpvs.DataGrid.defaultBinder=function(r,p){var s=this;q();s.changedSortFilter.unbind("binder");s.changedSortFilter.bind("binder",q);function q(){var u=g(s,r);var v=e(r);jpvs.readDataSource(p,null,null,f(s),t);function t(w){u.empty();$.each(w.data,function(x,y){a(s,v,u,y)})}}};jpvs.DataGrid.pagingBinder=function(t){var s=(t&&t.pageSize)||10;var u=(t&&t.preserveCurrentPage);var q=0;function p(B,w){var E=this;var C=g(E,B);var D=e(B);var v=u?q:0;q=v;var z=x();A();E.changedSortFilter.unbind("binder");E.changedSortFilter.bind("binder",A);function x(){var H=E.element.data("pagerId");var F;if(H){F=jpvs.find("#"+H)}else{var G=document.createElement("div");E.element.before(G);F=jpvs.Pager.create(G);H=jpvs.randomString(20);F.element.attr("id",H);E.element.data("pagerId",H)}F.change.unbind("DataGrid");F.change.bind("DataGrid",y);return F}function y(){var F=this.page();v=F;q=v;A(E,B,w,z)}function A(){var G=v*s;jpvs.readDataSource(w,G,s,f(E),F);function F(H){C.empty();$.each(H.data,function(J,K){a(E,D,C,K)});var I=Math.floor((H.total+s-1)/s);z.totalPages(I);z.page(v)}}}function r(){return q}p.currentPage=jpvs.property({get:r});return p};jpvs.DataGrid.scrollingBinder=function(u){var t=(u&&u.pageSize)||10;var q=(u&&u.chunkSize)||(5*t);var s=(u&&u.width);var r=(u&&u.height);var w=[];var v=false;function p(N,z){var T=this;var O=g(T,N);var P=e(N);var y=null;var x=[];var Q=null;var F=0;var E=0;var L=D();jpvs.readDataSource(z,0,t,f(T),H(function(){R(0);jpvs.readDataSource(z,t,q,f(T),H(S))}));T.changedSortFilter.unbind("binder");T.changedSortFilter.bind("binder",function(){x=[];Q=null;jpvs.readDataSource(z,y,t,f(T),H(function(){J(y)}))});function B(Y){var aa=Y;var V=aa+t;var U=true;var W;for(var X=aa;X<V&&X<Q;X++){var Z=x[X];if(!Z){U=false;W=X;break}}if(U){S()}else{var aa=Math.max(0,W-q);var V=Math.min(W+q,Q);A(aa,V)}}function A(V,U){w.push({start:V,end:U});C()}function C(){if(v){return}if(w.length!=0){var Y=w[0].start;var X=w[0].end;var W,V;for(var U=0;U<w.length;U++){var Z=w[U];W=Z.start;V=Z.end;Y=Math.min(Y,W);X=Math.max(X,V)}w=[];v=true;jpvs.readDataSource(z,Y,X-Y,f(T),H(S))}}function H(U){return function(Y){v=false;if(Q===null){Q=Y.total}var Z=Y.start;var V=Y.count;while(x.length<Q){x.push(undefined)}var W=Z,X=0;while(X<V){x[W++]=Y.data[X++]}if(U){U()}}}function R(V){if(y===null){J(V)}else{var U=V-y;if(Math.abs(U)<t){M(V,U)}else{J(V)}}y=V}function J(W){O.empty();var U=Math.min(W+t,Q);for(var V=W;V<U;V++){a(T,P,O,x[V])}K()}function M(X,U){if(U>0){T.removeBodyRows(0,U);var V=X+t-U;var W=0;while(W++<U){if(V<Q){a(T,P,O,x[V++])}}}else{if(U<0){U=-U;T.removeBodyRows(t-U,U);var V=X;var W=0;while(W<U){if(V<Q){a(T,P,O,x[V++],W++)}}}}K()}function S(){var aa=T.template();var U=T.emptyRowTemplate();var ad=O.children("tr");var Z=y;var V=Z+ad.length;var ac=false;var Y=0;for(var W=Z;W<V;W++){var X=x[W];var ab=ad.eq(Y++);if(X&&ab.data("fromEmptyRowTemplate")){if(aa){b(ab,P,aa,U,X);ac=true}}}if(ac){K()}C()}function D(){var W=T.element.data("scrollerId");var U;if(W){U=jpvs.find("#"+W)}else{var V=document.createElement("div");T.element.after(V);U=jpvs.Scroller.create(V);W=jpvs.randomString(20);U.element.attr("id",W);T.element.data("scrollerId",W);U.content.append(T.element);U.contentSize({width:"1000%",height:"200%"});G();U.objectSize({width:F+U.scrollbarW,height:E+U.scrollbarH})}U.change.unbind("DataGrid");U.change.bind("DataGrid",I);return U}function I(){var Y=this.scrollPosition();var V=Y.left;var X=0;this.contentPosition({top:X,left:V});var U=E/t*Q-E;var W=Math.min(Q,Math.floor(Y.top/U*(Q-t+5)));R(W);B(W)}function G(){var U={width:T.element.outerWidth(),height:T.element.outerHeight()};E=Math.max(E,U.height);F=Math.max(F,U.width)}function K(){if(!L){return}G();var U=E/t*Q;L.scrollableSize({width:F,height:U});L.objectSize({width:s||(F+L.scrollbarW),height:r||(E+L.scrollbarH)})}}return p}})();jQuery(function(a){a.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3c;Prec",nextText:"Succ&#x3e;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""}});(function(){jpvs.DateBox=function(d){this.attach(d);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.DateBox,type:"DateBox",cssClass:"DateBox",create:function(d){var e=document.createElement("input");$(e).attr("type","text");$(d).append(e);return e},init:function(d){this.element.datepicker({onSelect:function(e,f){return d.change.fire(d)}});this.element.change(function(){return d.change.fire(d)});this.element.datepicker("option",$.datepicker.regional[jpvs.currentLocale()]);this.element.datepicker("hide")},canAttachTo:function(d){return false},prototype:{date:jpvs.property({get:function(){return this.element.datepicker("getDate")},set:function(d){this.element.datepicker("setDate",d)}}),dateString:jpvs.property({get:function(){return a(this.date())},set:function(d){this.date(c(d))}})}});function a(f){if(!f){return""}var h=f.getFullYear();var g=f.getMonth()+1;var e=f.getDate();return b(h,4)+b(g,2)+b(e,2)}function b(e,d){e=$.trim(e.toString());while(e.length<d){e="0"+e}return e}function c(h){h=$.trim(h);if(h==""||h.length!=8){return null}var g=parseInt(h.substring(0,4));var f=parseInt(h.substring(4,6));var e=parseInt(h.substring(6,8));return new Date(g,f-1,e)}})();(function(){jpvs.DocumentEditor=function(C){this.attach(C);this.change=jpvs.event(this)};jpvs.DocumentEditor.allStrings={en:{clickToEdit:"Click here to edit",clickToEditField:"Click here to edit this field",clickToEditHeader:"Click here to edit the header",clickToEditFooter:"Click here to edit the footer",textEditor:"Text editor",fieldEditor:"Field editor",sectionOptions:"Options",sectionMargins:"Set margins",removeSection:"Remove section",removeSection_Warning:"The section will be removed. Do you wish to continue?",removeSection_Forbidden:"The section may not be removed. There must be at least one section in the document.",addSectionBefore:"Insert new section before",addSectionAfter:"Insert new section after",sortSections:"Reorder sections",sortSections_Prompt:"Please reorder the sections of the document by dragging them up and down.",invalidValuesFound:"Invalid values found. Please correct and try again.",bodyMargins:"Page margins",defaultMargin:"Default margin",defaultMargin_Notes:"Example: 2.5cm. Used only when any of left/right/bottom/top is missing.",topMargin:"Top margin",topMargin_Notes:"Example: 2cm. If missing, the default margin is used.",bottomMargin:"Bottom margin",bottomMargin_Notes:"Example: 2cm. If missing, the default margin is used.",leftMargin:"Left margin",leftMargin_Notes:"Example: 2cm. If missing, the default margin is used.",rightMargin:"Right margin",rightMargin_Notes:"Example: 2cm. If missing, the default margin is used.",headerMargins:"Header margins and height",footerMargins:"Footer margins and height",height:"Height",error:"Error",ok:"OK",cancel:"Cancel",apply:"Apply"},it:{clickToEdit:"Clicca qui per modificare",clickToEditField:"Clicca qui per modificare il campo",clickToEditHeader:"Clicca qui per modificare l'intestazione",clickToEditFooter:"Clicca qui per modificare il piรจ di pagina",textEditor:"Modifica testo",fieldEditor:"Modifica campo",sectionOptions:"Opzioni",sectionMargins:"Imposta margini",removeSection:"Elimina sezione",removeSection_Warning:"Confermi l'eliminazione della sezione?",removeSection_Forbidden:"La sezione non puรฒ essere rimossa. Il documento deve contenere almeno una sezione.",addSectionBefore:"Inserisci sezione prima",addSectionAfter:"Inserisci sezione dopo",sortSections:"Cambia ordine sezioni",sortSections_Prompt:"Riordinare le sezioni trascinandole su e giรน.",invalidValuesFound:"Trovati valori non validi. Correggere e riprovare.",bodyMargins:"Margini pagina",defaultMargin:"Margine predefinito",defaultMargin_Notes:"Esempio: 2.5cm. Usato solo quando manca almeno uno dei margini sinistro/destro/inferiore/superiore.",topMargin:"Margine superiore",topMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",bottomMargin:"Margine inferiore",bottomMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",leftMargin:"Margine sinistro",leftMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",rightMargin:"Margine destro",rightMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",headerMargins:"Margini ed altezza dell'intestazione",footerMargins:"Margini ed altezza del piรจ di pagina",height:"Altezza",error:"Errore",ok:"OK",cancel:"Annulla",apply:"Applica"}};jpvs.makeWidget({widget:jpvs.DocumentEditor,type:"DocumentEditor",cssClass:"DocumentEditor",create:function(C){var D=document.createElement("div");$(C).append(D);return D},init:function(C){jpvs.DocumentEditor.strings=jpvs.DocumentEditor.allStrings[jpvs.currentLocale()]},canAttachTo:function(C){return false},prototype:{document:jpvs.property({get:function(){return this.element.data("document")},setTask:function(C){this.element.data("document",C);this.element.empty();return u(this)}}),fields:jpvs.property({get:function(){var C=this.document();return C&&C.fields},set:function(C){q(this,C)}}),richTextEditor:jpvs.property({get:function(){return this.element.data("richTextEditor")},set:function(C){this.element.data("richTextEditor",C)}}),fieldEditor:jpvs.property({get:function(){return this.element.data("fieldEditor")},set:function(C){this.element.data("fieldEditor",C)}}),fieldDisplayMapper:jpvs.property({get:function(){return this.element.data("fieldDisplayMapper")},set:function(C){this.element.data("fieldDisplayMapper",C)}})}});function q(G,D){var C=G.document();var E=C&&C.fields;var F=$();G.element.find("span.Field").each(function(){var L=$(this);var K=L.data("jpvs.DocumentEditor.fieldInfo");var N=K&&K.fieldName;if(N){var M=D[N];if(M){E[N]={value:M.value};var H=function(O){return O};var J=G.fieldDisplayMapper()||H;var I=J(M.value);jpvs.write(L.empty(),I);if(M.highlight){F=F.add(L)}}}});if(F.length){jpvs.flashClass(F,"Field-Highlight")}}function r(D){var C=u(D);jpvs.runForegroundTask(C)}function t(E,D){var C=h();v(E,D,C);a(E,C)}function s(D){var C=u(D);jpvs.runBackgroundTask(C)}function u(C){return function(D){D.executionState=D.executionState||1;if(D.executionState==1){D.elem=C.element;D.doc=C.document();D.sections=D.doc&&D.doc.sections;D.fields=D.doc&&D.doc.fields;D.fieldHighlightList=h();D.executionState=2;return{progress:"0%"}}if(D.executionState==2){D.domElems=[];D.elem.empty();$.each(D.sections,function(O,M){var N=jpvs.writeTag(D.elem,"div");N.addClass("Section").css("position","relative");N.data("jpvs.DocumentEditor.sectionNum",O);d(N,M);var L=jpvs.writeTag(N,"div");L.addClass("Header");c(L,M);var J=jpvs.writeTag(N,"div");J.addClass("Footer");b(J,M);var K=jpvs.writeTag(J,"div");K.css("position","absolute");K.css("bottom","0px");K.css("left","0px");K.css("right","0px");var I=jpvs.writeTag(N,"div");I.addClass("Body");jpvs.writeTag(I,"img").attr("src",jpvs.Resources.images.loading);D.domElems.push({sectionElement:N,headerElement:L,bodyElement:I,footerElementInside:K,footerElement:J});N.data("jpvs.DocumentEditor.domElem",{headerElement:L,bodyElement:I,footerElementInside:K,footerElement:J})});D.executionState=3;return{progress:"1%"}}if(D.executionState==3){if(D.sectionNum==null){D.sectionNum=0}else{D.sectionNum++}if(D.sectionNum>=D.sections.length){D.sectionNum=null;D.executionState=4;return{progress:"90%"}}var H=D.sections[D.sectionNum];var E=D.domElems[D.sectionNum];v(C,D.sectionNum,D.fieldHighlightList);if(H.header){H.header.highlight=false}if(H.body){H.body.highlight=false}if(H.footer){H.footer.highlight=false}var G=1+Math.floor(D.sectionNum/(D.sections.length-1)*89);return{progress:G+"%"}}if(D.executionState==4){if(D.sectionNum==null){D.sectionNum=0}else{D.sectionNum++}if(D.sectionNum>=D.sections.length){D.sectionNum=null;D.executionState=5;return{progress:"99%"}}var H=D.sections[D.sectionNum];var E=D.domElems[D.sectionNum];var F=jpvs.writeTag(E.sectionElement,"div");F.addClass("MenuContainer").css({position:"absolute",top:"0px",right:"0px",zIndex:(10000-D.sectionNum).toString()});B(C,F,D.sections,D.sectionNum,H);var G=90+Math.floor(D.sectionNum/(D.sections.length-1)*9);return{progress:G+"%"}}if(D.executionState==5){a(C,D.fieldHighlightList);return false}}}function h(){return{list:$()}}function d(H,G){var E=G&&G.margins;var D=j(E,"left","2cm");var I=j(E,"top","2cm");var F=j(E,"right","2cm");var C=j(E,"bottom","2cm");H.css("padding-left",D);H.css("padding-top",I);H.css("padding-right",F);H.css("padding-bottom",C)}function c(C,L){var J=L&&L.margins;var I=j(J,"left","2cm");var K=j(J,"right","2cm");var F=L&&L.header&&L.header.margins;var H=j(F,"top","0.5cm");var E=j(F,"left",I);var G=j(F,"right",K);var D=(L&&L.header&&L.header.height)||"1cm";C.css("position","absolute");C.css("overflow","hidden");C.css("top",H);C.css("left",E);C.css("right",G);C.css("height",D)}function b(D,L){var J=L&&L.margins;var I=j(J,"left","2cm");var K=j(J,"right","2cm");var G=L&&L.footer&&L.footer.margins;var C=j(G,"bottom","0.5cm");var F=j(G,"left",I);var H=j(G,"right",K);var E=(L&&L.footer&&L.footer.height)||"1cm";D.css("position","absolute");D.css("overflow","hidden");D.css("bottom",C);D.css("left",F);D.css("right",H);D.css("height",E)}function v(K,I,E){var H=K.element.find("div.Section").eq(I);var D=H.data("jpvs.DocumentEditor.domElem");var C=K.document();var J=C&&C.sections;var F=C&&C.fields;var G=J&&J[I];d(H,G);c(D.headerElement,G);b(D.footerElement,G);A(K,D.headerElement,D.headerElement,G&&G.header&&G.header.content,F,"Header-Hover",G&&G.header&&G.header.highlight?"Header-Highlight":"",function(L){G.header=G.header||{};G.header.content=L;G.header.highlight=true},E,jpvs.DocumentEditor.strings.clickToEditHeader);A(K,D.bodyElement,D.bodyElement,G&&G.body&&G.body.content,F,"Body-Hover",G&&G.body&&G.body.highlight?"Body-Highlight":"",function(L){G.body=G.body||{};G.body.content=L;G.body.highlight=true},E,jpvs.DocumentEditor.strings.clickToEdit);A(K,D.footerElementInside,D.footerElement,G&&G.footer&&G.footer.content,F,"Footer-Hover",G&&G.footer&&G.footer.highlight?"Footer-Highlight":"",function(L){G.footer=G.footer||{};G.footer.content=L;G.footer.highlight=true},E,jpvs.DocumentEditor.strings.clickToEditFooter)}function a(F,D){if(D.list.length){jpvs.flashClass(D.list,"Field-Highlight");var C=F.document();var E=C&&C.fields;if(E){$.each(E,function(H,G){G.highlight=false})}}}function B(H,C,G,F,E){var D=jpvs.Menu.create(C);D.template(["HorizontalMenuBar","VerticalMenuBar"]);D.itemTemplate(["HorizontalMenuBarItem","VerticalMenuBarItem"]);D.menuItems([{text:"...",tooltip:jpvs.DocumentEditor.strings.sectionOptions,items:[{text:jpvs.DocumentEditor.strings.sectionMargins,click:o(H,E,F)},jpvs.Menu.Separator,{text:jpvs.DocumentEditor.strings.addSectionBefore,click:k(H,G,F)},{text:jpvs.DocumentEditor.strings.addSectionAfter,click:k(H,G,F+1)},{text:jpvs.DocumentEditor.strings.removeSection,click:n(H,G,F)},jpvs.Menu.Separator,{text:jpvs.DocumentEditor.strings.sortSections,click:p(H,G)}]}])}function j(D,F,C){if(D){var E=D[F]||D.all;if(E){return E}}return C}function A(P,G,C,D,I,K,J,L,H,M){var F=D;if(!D){F=""}G.empty();var N=C.parent();var O=N.data("jpvs.DocumentEditor.sectionNum");F=jpvs.cleanHtml(F);if($.trim(F)==""){F=M}C.css("cursor","pointer").attr("title",jpvs.DocumentEditor.strings.clickToEdit).unbind(".writeContent").bind("click.writeContent",function(){m(P,D,L,O);return false}).bind("mouseenter.writeContent",function(){C.parent().addClass("Section-Hover");C.addClass(K)}).bind("mouseleave.writeContent",function(){C.parent().removeClass("Section-Hover");C.removeClass(K)});var E=XmlParser.parseString("<root>"+F+"</root>",null,true);z(P,G,E,I,H);if(J!=""){jpvs.flashClass(G,J)}}function z(H,C,I,E,D){if(I.name=="#TEXT"){y(H,C,I.value||"",E,D)}else{if(I.name=="root"){if(I.children){$.each(I.children,function(K,J){z(H,C,J,E,D)})}}else{var G=I.name;var F=jpvs.writeTag(C,G);if(I.attributes){$.each(I.attributes,function(J,K){F.attr(J,K)})}if(I.children){$.each(I.children,function(K,J){z(H,F,J,E,D)});if(G=="p"){jpvs.writeTag(F,"br")}}}}}function y(P,C,N,H,F){var L=/\$\{(.*?)\}/g;var I=0;for(var J=L.exec(N);J!=null;J=L.exec(N)){var K=J[0];var G=J[1];var D=L.lastIndex;var M=D-K.length;var O=N.substring(I,M);x(C,O);w(P,C,H,G,F);I=D}var E=N.substring(I);x(C,E)}var e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};function x(C,D){var E=D;$.each(e,function(F,G){E=E.replace(F,G)});jpvs.write(C,E)}function w(M,C,J,I,H){var E=J&&J[I];var K=E&&E.value;var G=E&&E.highlight;var D=function(N){return N};var F=M.fieldDisplayMapper()||D;K=F(K);if($.trim(K)==""){K=jpvs.DocumentEditor.strings.clickToEditField}var L=jpvs.writeTag(C,"span",K);L.addClass("Field").attr("title",jpvs.DocumentEditor.strings.clickToEditField).click(function(){l(M,J,I);return false}).hover(function(){L.addClass("Field-Hover")},function(){L.removeClass("Field-Hover")});L.data("jpvs.DocumentEditor.fieldInfo",{fieldName:I});if(G){H.list=H.list.add(L)}}function m(H,C,D,G){var F=H.richTextEditor()||f();F.editText.call(F,C,E);function E(I){if(I!==undefined&&I!=C){D(I);t(H,G);H.change.fire(H)}}}function l(I,F,E){var C=I.fieldEditor()||g();var D=F&&F[E];var G=D&&D.value;C.editField.call(C,F,E,H);function H(K){if(K!==undefined&&K!=G){var J={};J[E]={value:K,highlight:true};q(I,J);I.change.fire(I)}}}function o(F,D,E){return function(){var L=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.sectionMargins).close(function(){this.destroy()});D.margins=D.margins||{};D.header=D.header||{};D.header.margins=D.header.margins||{};D.footer=D.footer||{};D.footer.margins=D.footer.margins||{};var M=jpvs.Table.create(L).caption(jpvs.DocumentEditor.strings.bodyMargins);var N=G(M,"defaultMargin",D.margins.all);var ab=G(M,"topMargin",D.margins.top);var O=G(M,"bottomMargin",D.margins.bottom);var Z=G(M,"leftMargin",D.margins.left);var aa=G(M,"rightMargin",D.margins.right);M=jpvs.Table.create(L).caption(jpvs.DocumentEditor.strings.headerMargins);var U=G(M,"defaultMargin",D.header.margins.all);var Y=G(M,"topMargin",D.header.margins.top);var W=G(M,"leftMargin",D.header.margins.left);var X=G(M,"rightMargin",D.header.margins.right);var V=G(M,"height",D.header.height);M=jpvs.Table.create(L).caption(jpvs.DocumentEditor.strings.footerMargins);var P=G(M,"defaultMargin",D.footer.margins.all);var Q=G(M,"bottomMargin",D.footer.margins.bottom);var S=G(M,"leftMargin",D.footer.margins.left);var T=G(M,"rightMargin",D.footer.margins.right);var R=G(M,"height",D.footer.height);jpvs.writeButtonBar(L,[{text:jpvs.DocumentEditor.strings.ok,click:K},{text:jpvs.DocumentEditor.strings.apply,click:I},{text:jpvs.DocumentEditor.strings.cancel,click:J}]);L.show();function H(af){if(!af){return H([N,ab,O,Z,aa,U,Y,W,X,V,P,Q,S,T,R])}var ac=false;var ae=[];for(var ad=0;ad<af.length;ad++){var ag=af[ad];ag.removeState(jpvs.states.ERROR);var ah=C(af[ad]);if(ah===undefined){ag.addState(jpvs.states.ERROR);ae.push(ag);ac=true}}if(ac){jpvs.alert(jpvs.DocumentEditor.strings.error,jpvs.DocumentEditor.strings.invalidValuesFound,ae[0])}return !ac}function K(){if(!H()){return}L.hide(function(){I();L.destroy()})}function I(){if(!H()){return}D.margins.all=C(N);D.margins.top=C(ab);D.margins.bottom=C(O);D.margins.left=C(Z);D.margins.right=C(aa);D.header.margins.all=C(U);D.header.margins.top=C(Y);D.header.margins.left=C(W);D.header.margins.right=C(X);D.header.height=C(V);D.footer.margins.all=C(P);D.footer.margins.bottom=C(Q);D.footer.margins.left=C(S);D.footer.margins.right=C(T);D.footer.height=C(R);t(F,E);F.change.fire(F)}function J(){L.destroy()}};function C(I){var J=$.trim(I.text().replace(" ",""));if(J==""){return null}var H=/^\+?[0-9]{1,2}(\.[0-9]{1,3})?(cm)?$/gi;if(!H.test(J)){return undefined}if(J.indexOf("cm")<0){J=J+"cm"}I.text(J);return J}function G(K,H,M){var J=K.writeRow();J.writeCell(jpvs.DocumentEditor.strings[H]);var L=jpvs.TextBox.create(J.writeCell());L.text(M);var I=jpvs.DocumentEditor.strings[H+"_Notes"];if(I){J.writeCell(I)}return L}}function k(E,D,C){return function(){var F={margins:{},header:{margins:{}},footer:{margins:{}},body:{highlight:true}};if(C>=D.length){D.push(F)}else{D.splice(C,0,F)}s(E);E.change.fire(E)}}function n(F,E,D){return function(){if(E.length<2){jpvs.alert(jpvs.DocumentEditor.strings.error,jpvs.DocumentEditor.strings.removeSection_Forbidden);return}jpvs.confirm(jpvs.DocumentEditor.strings.removeSection,jpvs.DocumentEditor.strings.removeSection_Warning,C)};function C(){E.splice(D,1);s(F);F.change.fire(F)}}function p(D,C){return function(){var K=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.sortSections).close(function(){this.destroy()});jpvs.writeln(K,jpvs.DocumentEditor.strings.sortSections_Prompt);jpvs.writeTag(K,"hr");var G=jpvs.DataGrid.create(K);G.template([E,F]);G.dataBind(C);G.element.sortable({items:"tbody > tr"});jpvs.writeTag(K,"hr");jpvs.writeButtonBar(K,[{text:jpvs.DocumentEditor.strings.ok,click:J},{text:jpvs.DocumentEditor.strings.apply,click:H},{text:jpvs.DocumentEditor.strings.cancel,click:I}]);K.show();function E(L){jpvs.writeTag(this,"img").attr("src",jpvs.Resources.images.moveButton);this.parent().css("cursor","move").data("section",L)}function F(L){jpvs.write(this,M(jpvs.stripHtml(L&&L.body&&L.body.content)));function M(N){if(N.length>150){return N.substring(0,147)+"..."}else{return N}}}function J(){K.hide(function(){H();K.destroy()})}function H(){var L=G.element.find("tbody > tr");C.splice(0,C.length);L.each(function(){var M=$(this).data("section");C.push(M)});s(D);D.change.fire(D)}function I(){K.destroy()}}}function f(){function C(D,F){var H=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.textEditor).close(function(){this.destroy()});var I=jpvs.MultiLineTextBox.create(H);I.text(D);I.element.attr({rows:10,cols:50});jpvs.writeButtonBar(H,[{text:jpvs.DocumentEditor.strings.ok,click:G},{text:jpvs.DocumentEditor.strings.cancel,click:E}]);H.show(function(){I.focus()});function G(){H.hide(function(){F(I.text());H.destroy()})}function E(){H.destroy();F()}}return{editText:C}}function g(){function C(F,E,I){var K=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.fieldEditor).close(function(){this.destroy()});var L=jpvs.TextBox.create(K);var D=F&&F[E];var G=D&&D.value;L.text(G||"");jpvs.writeButtonBar(K,[{text:jpvs.DocumentEditor.strings.ok,click:J},{text:jpvs.DocumentEditor.strings.cancel,click:H}]);K.show(function(){L.focus()});function J(){K.hide(function(){I(L.text());K.destroy()})}function H(){K.destroy();I()}}return{editField:C}}})();jpvs.DropDownList=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.DropDownList,type:"DropDownList",cssClass:"DropDownList",create:function(a){var b=document.createElement("select");$(a).append(b);return b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is("select")},prototype:{clearItems:function(){this.element.empty();return this},addItem:function(e,c){var d=e;var b=c!=null?c:e;if(d!=null&b!=null){var a=document.createElement("option");$(a).attr("value",d).text(b).appendTo(this.element)}return this},addItems:function(a){var b=this;$.each(a,function(c,d){if(d!=null){if(d.value!=null){b.addItem(d.value,d.text)}else{b.addItem(d)}}});return this},count:function(){return this.element.find("option").length},selectedValue:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}})}});jpvs.ImageButton=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.ImageButton,type:"ImageButton",cssClass:"ImageButton",create:function(a){var b=document.createElement("img");$(a).append(b);return b},init:function(c){var b=this.element.attr("src");var a=this.element.data("jpvsHover");this.imageUrls({normal:b,hover:a});this.element.hover(function(){c.element.attr("src",c.getHoverImage())},function(){c.element.attr("src",c.getNormalImage())});this.element.click(function(){return c.click.fire(c)})},canAttachTo:function(a){return false},prototype:{imageUrls:jpvs.property({get:function(){return this.element.data("images")},set:function(a){this.element.data("images",a);this.element.attr("src",this.getNormalImage())}}),getNormalImage:function(){var a=this.imageUrls();if(a){if(typeof(a)=="string"){return a}else{return a.normal||""}}return""},getHoverImage:function(){var a=this.imageUrls();if(a){if(typeof(a)=="string"){return a}else{return a.hover||a.normal||""}}return""}}});jpvs.LinkButton=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.LinkButton,type:"LinkButton",cssClass:"LinkButton",create:function(a){var b=document.createElement("a");$(a).append(b);return b},init:function(a){a.element.attr("href","#");this.element.click(function(b){b.preventDefault();return a.click.fire(a)})},canAttachTo:function(a){return false},prototype:{text:jpvs.property({get:function(){return this.element.text()},set:function(a){this.element.text(a)}})}});(function(){var a={};$(document).ready(function(){try{$(document).on("mouseover.jpvsMenu",".Menu .Item",f);$(document).on("mouseout.jpvsMenu",".Menu .Item",e);$(document).on("click.jpvsMenu",d)}catch(k){}});jpvs.Menu=function(k){this.attach(k);this.click=jpvs.event(this)};jpvs.Menu.Separator={};jpvs.Menu.MenuElement=function(l,o,n,m,k){this.element=l;this.menuItems=o;this.level=n;this.isPopup=m;this.childrenAlignment=k;this.itemElements=l.find(".Item");this.parentElement=null};jpvs.Menu.MenuElement.prototype.show=function(){$.each(a,function(v,w){b(w)});var k=[];for(var u=this;u!=null;u=u.parentElement){k.unshift(u)}for(var q=0;q<k.length;q++){var r=k[q];if(r.isPopup){var s=r.parentElement;var t=n(s,r);var l=o(t);var m=p(l,s.childrenAlignment);r.element.show().css({position:"absolute",left:m.x+"px",top:m.y+"px"});jpvs.fitInWindow(r.element)}else{r.element.show()}}function n(y,x){for(var v=0;v<y.itemElements.length;v++){var w=$(y.itemElements[v]);var z=w.data("subMenu");if(z===x){return w}}}function o(v){var y=v.offset();var z=v.outerWidth();var x=v.outerHeight();return{x:y.left,y:y.top,w:z,h:x}}function p(w,v){if(v=="right"){return{x:w.x+w.w,y:w.y}}else{if(v=="bottom"){return{x:w.x,y:w.y+w.h}}else{return w}}}};jpvs.Menu.MenuElement.prototype.hide=function(){this.element.hide()};jpvs.Menu.MenuElement.prototype.hideIfNonRoot=function(){if(this.level!=0){this.element.hide()}};jpvs.Menu.MenuElement.prototype.getChildren=function(){var k=[];$.each(this.itemElements,function(l,m){var n=$(m).data("subMenu");k.push(n)});return k};jpvs.Menu.Templates={HorizontalMenuBar:function(l){var m=l.items;var n=l.itemTemplate;var k=l.level;var p=jpvs.Table.create(this).addClass("HorizontalMenuBar").addClass("HorizontalMenuBar-Level"+k);var o=p.writeBodyRow();$.each(m,function(r,s){var q=o.writeCell().addClass("Item");jpvs.applyTemplate(q,n,s)});return new jpvs.Menu.MenuElement(p.element,m,k!=0,false,"bottom")},VerticalMenuBar:function(l){var m=l.items;var n=l.itemTemplate;var k=l.level;var o=jpvs.Table.create(this).addClass("VerticalMenuBar").addClass("VerticalMenuBar-Level"+k);$.each(m,function(p,q){var r=o.writeBodyRow();r.element.addClass("Item");jpvs.applyTemplate(r,n,q)});return new jpvs.Menu.MenuElement(o.element,m,k!=0,false,"right")},PopupMenu:function(l){var m=l.items;var n=l.itemTemplate;var k=l.level;var o=jpvs.Table.create(this).addClass("PopupMenu").addClass("PopupMenu-Level"+k);$.each(m,function(p,q){var r=o.writeBodyRow();r.element.addClass("Item");jpvs.applyTemplate(r,n,q)});return new jpvs.Menu.MenuElement(o.element,m,k!=0,true,"right")}};jpvs.Menu.ItemTemplates={HorizontalMenuBarItem:function(k){if(k===jpvs.Menu.Separator){this.addClass("Separator");jpvs.write(this,"|")}else{jpvs.write(this,k&&k.text);if(k&&k.tooltip){this.attr("title",k.tooltip)}}},VerticalMenuBarItem:function(k){jpvs.Menu.ItemTemplates.PopupMenuItem.call(this,k)},PopupMenuItem:function(m){if(m===jpvs.Menu.Separator){this.addClass("Separator");var n=jpvs.writeTag(this,"td").attr("colspan",3);jpvs.writeTag(n,"hr")}else{var o=jpvs.writeTag(this,"td").addClass("Icon");var p=jpvs.writeTag(this,"td",m&&m.text).addClass("Text");var q=jpvs.writeTag(this,"td").addClass("SubMenu");if(m&&m.tooltip){p.attr("title",m.tooltip)}if(m&&m.icon){var l=jpvs.writeTag(o,"img");l.attr("src",m.icon)}if(m&&m.items&&m.items.length){var k=jpvs.writeTag(q,"img");k.attr("src",jpvs.Resources.images.subMenuMarker)}}}};jpvs.Menu.Templates.Default_Level0=jpvs.Menu.Templates.HorizontalMenuBar;jpvs.Menu.Templates.Default_OtherLevels=jpvs.Menu.Templates.PopupMenu;jpvs.Menu.ItemTemplates.Default_Level0=jpvs.Menu.ItemTemplates.HorizontalMenuBarItem;jpvs.Menu.ItemTemplates.Default_OtherLevels=jpvs.Menu.ItemTemplates.PopupMenuItem;jpvs.makeWidget({widget:jpvs.Menu,type:"Menu",cssClass:"Menu",create:function(k){var l=document.createElement("div");$(k).append(l);return l},init:function(l){var k=g(this.element);this.element.empty();this.menuItems(k);this.ensureId();a[this.id()]=this},canAttachTo:function(k){return false},prototype:{template:j("jpvsTemplate"),itemTemplate:j("jpvsItemTemplate"),menuItems:jpvs.property({get:function(){return this.element.data("menuItems")},set:function(k){this.element.data("menuItems",k);h(this,k)}})}});function j(k){return jpvs.property({get:function(){var l=this.element.data(k);if(!l){return[]}if(typeof(l)=="string"){var m=l.split(",");return m}else{return l}},set:function(l){this.element.data(k,l)}})}function g(l){var n=[];o(l,null,n);m(n);return n;function o(q,r,s){var p=$(q).contents();p.each(function(){var u=this;var t=$(this);if(u.nodeType==3){if(r){r.text=k(r.text,t.text())}}else{if(u.nodeType==1){var v=u.nodeName.toLowerCase();if(v=="ul"||v=="ol"){o(u,null,s)}else{if(v=="a"){if(r){r.text=k(r.text,t.text());r.href=t.attr("href")}}else{if(v=="button"){if(r){r.text=k(r.text,t.text());r.click=u.onclick}}else{var w=r;r={text:"",items:[]};s.push(r);o(u,r,r.items);r=w}}}}}})}function m(t){if(!t){return}for(var r=0;r<t.length;r++){var s=t[r];var q=(s.text!=null&&$.trim(s.text)!="");var p=(s.items!=null&&s.items.length!=0);if(!q&&!p){t[r]=jpvs.Menu.Separator}m(s.items)}}function k(p,q){p=$.trim(p)+" "+$.trim(q);return $.trim(p)}}function h(p,l){p.element.empty();var o=p.template();var k=p.itemTemplate();p.rootElement=n(p.element,o,k,0,l);m(null,p.rootElement);function m(s,r){if(!r){return}r.parentElement=s;var q=r.getChildren();$.each(q,function(u,t){m(r,t)})}function n(s,y,v,w,u){if(!u||u.length==0){return}var r=c(y[w],w,jpvs.Menu.Templates);var q=c(v[w],w,jpvs.Menu.ItemTemplates);var x=jpvs.applyTemplate(s,r,{items:u,itemTemplate:q,level:w});if(w==0){x.show()}else{x.hide()}var t=x.element.find(".Item");$.each(u,function(A,B){var C=t[A];if(C){var z=$(C);z.data("menuItem",B);var D=n(s,y,v,w+1,B&&B.items);if(D){z.data("subMenu",D)}}});return x}}function c(m,l,k){var n;if(typeof(m)=="function"){n=m}else{if(typeof(m)=="string"){n=k[m]}}if(!n){if(l==0){n=k.Default_Level0}else{n=k.Default_OtherLevels}}return n}function b(k){var m=k.rootElement;l(m);function l(o){if(!o){return}o.hideIfNonRoot();var n=o.getChildren();$.each(n,function(q,p){l(p)})}}function f(k){var l=$(k.currentTarget);var m=l.data("menuItem");if(m===jpvs.Menu.Separator){return}l.addClass("Item-Hover")}function e(k){var l=$(k.currentTarget);l.removeClass("Item-Hover")}function d(n){var k=$(n.target);var l=k.closest(".Menu .Item");var m=l.closest(".Menu");if(l.length==0){$.each(a,function(r,s){b(s)})}else{var p=l.data("menuItem");if(p===jpvs.Menu.Separator){return}var o=jpvs.find(m);var q=l.data("subMenu");if(q){q.show()}else{b(o)}o.click.fire(o,null,p);if(p&&p.click){p.click.call(p,p)}if(p&&p.href){window.location=p.href}}}})();jpvs.MultiLineTextBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.MultiLineTextBox,type:"MultiLineTextBox",cssClass:"MultiLineTextBox",create:function(a){var b=document.createElement("textarea");$(a).append(b);return b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is("textarea")},prototype:{text:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}})}});(function(){jpvs.MultiSelectBox=function(j){this.attach(j);this.change=jpvs.event(this)};jpvs.MultiSelectBox.allStrings={en:{selectAll:"Select all",unselectAll:"Unselect all"},it:{selectAll:"Seleziona tutto",unselectAll:"Deseleziona tutto"}};jpvs.makeWidget({widget:jpvs.MultiSelectBox,type:"MultiSelectBox",cssClass:"MultiSelectBox",create:function(j){var k=document.createElement("table");$(j).append(k);return k},init:function(o){jpvs.MultiSelectBox.strings=jpvs.MultiSelectBox.allStrings[jpvs.currentLocale()];var k=[];this.element.find("option").each(function(){var p=$(this);var s=p.val();var r=p.text();var q=p.prop("selected");k.push({value:s,text:r,selected:q})});var l=jpvs.writeTag(this.element.parent(),"table");l.insertAfter(this.element);this.element.remove();l.attr("id",this.element.attr("id"));l.attr("class",this.element.attr("class"));this.element=l;e(o,k);var m=jpvs.writeTag(o,"tbody");var n=jpvs.writeTag(m,"tr");this.label=jpvs.writeTag(n,"td");this.label.addClass("Label");var j=jpvs.writeTag(n,"td");j.addClass("ButtonContainer");this.button=jpvs.Button.create(j).text("...").click(function(){g(o)});h(o)},canAttachTo:function(j){return false},prototype:{caption:jpvs.property({get:function(){return this.element.data("caption")},set:function(j){this.element.data("caption",j)}}),prompt:jpvs.property({get:function(){return this.element.data("prompt")},set:function(j){this.element.data("prompt",j)}}),containerTemplate:jpvs.property({get:function(){return this.element.data("containerTemplate")},set:function(j){this.element.data("containerTemplate",j)}}),itemTemplate:jpvs.property({get:function(){return this.element.data("itemTemplate")},set:function(j){this.element.data("itemTemplate",j)}}),clearItems:function(){e(this,[]);h(this);return this},addItem:function(o,m,k){var n=o;var l=m!=null?m:o;if(n!=null&l!=null){var j=a(this);j.push({value:n,text:l,selected:!!k});e(this,j);h(this)}return this},addItems:function(j){var k=this;$.each(j,function(l,m){if(m!=null){if(m.value!=null){k.addItem(m.value,m.text,m.selected)}else{k.addItem(m)}}});return this},count:function(){var j=a(this);return j.length},selectedValues:jpvs.property({get:function(){return d(this)},set:function(j){f(this,j)}}),selectedValuesString:jpvs.property({get:function(){return this.selectedValues().join(",")},set:function(j){var k=$.trim(j);if(k!=""){this.selectedValues(k.split(","))}else{this.selectedValues([])}}})}});function a(j){return j.element.data("items")}function e(k,j){k.element.data("items",j)}function b(l){var j=a(l);var k=[];$.each(j,function(m,n){if(n.selected){k.push(n)}});return k}function c(l){var j=b(l);var k=[];$.each(j,function(m,n){k.push(n.text)});return k}function d(l){var j=b(l);var k=[];$.each(j,function(m,n){k.push(n.value)});return k}function f(m,l){var j=a(m);var k={};$.each(j,function(n,o){o.selected=false;k[o.value]=o});$.each(l,function(n,p){var o=k[p];if(o){o.selected=true}});e(m,j);h(m)}function h(k){var j=c(k);jpvs.write(k.label.empty(),j.join(", "))}function g(x){var n=a(x);var s=jpvs.Popup.create().addState("MultiSelectBox").title(null).modal(false).position({my:"left top",at:"left bottom",of:x.label,collision:"fit",position:"absolute"});s.autoDestroy(true);var t=x.prompt();if(t){jpvs.writeln(s,t)}jpvs.LinkButton.create(s).text(jpvs.MultiSelectBox.strings.selectAll).click(q);jpvs.write(s," ");jpvs.LinkButton.create(s).text(jpvs.MultiSelectBox.strings.unselectAll).click(r);jpvs.writeln(s);var j=x.containerTemplate()||k;var v=jpvs.applyTemplate(s,j);var o=x.itemTemplate()||l;var m=[];$.each(n,function(y,z){var A=jpvs.applyTemplate(v,o,z);m.push(A);A.selected(!!z.selected);A.change(p(A,z))});s.show();function q(){u(true)}function r(){u(false)}function u(B){for(var y=0;y<n.length;y++){var z=n[y];var A=m[y];A.selected(B);z.selected=B}w()}function p(z,y){return function(){y.selected=z.selected();w()}}function w(){e(x,n);h(x);x.change.fire(x)}function k(){return jpvs.writeTag(this,"ul")}function l(z){var B=jpvs.writeTag(this,"li");var y=jpvs.CheckBox.create(B).text(z.text).change(C);var A={selected:jpvs.property({get:function(){return y.checked()},set:function(D){y.checked(D)}}),change:jpvs.event(x)};return A;function C(){A.change.fire(A)}}}})();(function(){jpvs.Pager=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.Pager.allStrings={en:{firstPage:"First page",previousPage:"Previous page",nextPage:"Next page",lastPage:"Last page",pag:"Page"},it:{firstPage:"Prima pagina",previousPage:"Pagina precedente",nextPage:"Pagina successiva",lastPage:"Ultima pagina",pag:"Pag."}};jpvs.makeWidget({widget:jpvs.Pager,type:"Pager",cssClass:"Pager",create:function(a){var b=document.createElement("table");$(a).append(b);return b},init:function(j){var g=jpvs.writeTag(j.element,"tbody");var h=jpvs.writeTag(g,"tr");var c=jpvs.writeTag(h,"td");var f=jpvs.writeTag(h,"td");var b=jpvs.writeTag(h,"td");var e=jpvs.writeTag(h,"td");var d=jpvs.writeTag(h,"td");jpvs.Pager.strings=jpvs.Pager.allStrings[jpvs.currentLocale()];jpvs.LinkButton.create(c).text(jpvs.Pager.strings.firstPage).click(function(){j.page(Math.min(0,j.totalPages()-1));j.change.fire(j)});jpvs.LinkButton.create(e).text(jpvs.Pager.strings.nextPage).click(function(){j.page(Math.min(j.page()+1,j.totalPages()-1));j.change.fire(j)});jpvs.LinkButton.create(f).text(jpvs.Pager.strings.previousPage).click(function(){j.page(Math.max(0,j.page()-1));j.change.fire(j)});jpvs.LinkButton.create(d).text(jpvs.Pager.strings.lastPage).click(function(){j.page(j.totalPages()-1);j.change.fire(j)});var a=jpvs.DropDownList.create(b).change(function(){var k=parseInt(this.selectedValue());j.page(Math.min(k,j.totalPages()-1));j.change.fire(j)});this.element.data("cmbPages",a)},canAttachTo:function(a){return false},prototype:{page:jpvs.property({get:function(){return this.element.data("page")||0},set:function(b){this.element.data("page",b);var a=this.element.data("cmbPages");a.selectedValue(b.toString())}}),totalPages:jpvs.property({get:function(){return this.element.data("totalPages")||0},set:function(d){var c=this.totalPages();if(c!=d){var a=this.element.data("cmbPages");a.clearItems();for(var b=0;b<d;b++){a.addItem(b.toString(),jpvs.Pager.strings.pag+" "+(b+1)+" / "+d)}}this.element.data("totalPages",d)}})}})})();(function(){var a={};$(document).ready(function(){try{$(document).on("click.jpvsPopup",b).on("keydown.jpvsPopup",c)}catch(d){}});jpvs.Popup=function(d){this.attach(d);this.close=jpvs.event(this)};jpvs.Popup.getTopMost=function(){var d,e;$.each(a,function(f,g){if(!g.open){return}var h=g.widget.zIndex();if(!e||h>e){d=g;e=h}});return d?d.widget:null};jpvs.makeWidget({widget:jpvs.Popup,type:"Popup",cssClass:"Popup",create:function(d){var e=document.createElement("div");$(e).attr("id",jpvs.randomString(20));$(d).append(e);return e},init:function(j){a[this.element.attr("id")]={open:false,autoDestroy:false,autoHide:false,widget:this};var d=this.element.contents();this.blanketElement=$(document.createElement("div"));this.blanketElement.addClass("DimScreen").css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%"});this.element.append(this.blanketElement);this.contentsElement=$(document.createElement("div"));this.contentsElement.addClass("Contents").append(d);this.element.append(this.contentsElement);this.element.hide();var k=this.element.data("jpvsWidth");if(k){this.contentsElement.css({width:k})}var e=this.contentsElement.children("h1").detach();var h=this.contentsElement.contents();this.titleElement=$(document.createElement("div"));this.titleElement.addClass("Title");this.contentsElement.append(this.titleElement);this.bodyElement=$(document.createElement("div"));this.bodyElement.addClass("Body");this.contentsElement.append(this.bodyElement);this.bodyElement.append(h);this.closeButton=jpvs.ImageButton.create(this.titleElement);this.closeButton.imageUrls({normal:jpvs.Resources.images.closeButton,hover:jpvs.Resources.images.closeButtonHover});this.closeButton.click.bind(function(){j.hide();j.close.fire(j)});var f=jpvs.writeTag(this.titleElement,"h1");f.append(e.contents());if(this.contentsElement.draggable){this.contentsElement.draggable({addClasses:false,containment:"window",cursor:"move",handle:f,scroll:false})}this.modal(true);this.contentsElement.mousedown(g(this));function g(l){return function(){l.bringForward()}}},canAttachTo:function(d){return false},destroy:function(){var d=this;this.hide(function(){delete a[d.element.attr("id")];d.element.remove()});return false},getMainContentElement:function(){return this.bodyElement},prototype:{modal:jpvs.property({get:function(){return this.element.data("modal")},set:function(d){this.element.data("modal",!!d)}}),autoHide:jpvs.property({get:function(){return !!a[this.element.attr("id")].autoHide},set:function(d){a[this.element.attr("id")].autoHide=!!d}}),autoDestroy:jpvs.property({get:function(){return !!a[this.element.attr("id")].autoDestroy},set:function(d){a[this.element.attr("id")].autoDestroy=!!d}}),position:jpvs.property({get:function(){return this.element.data("position")},set:function(d){this.element.data("position",d)}}),applyPosition:function(){var k=this.contentsElement.outerWidth();var h=this.contentsElement.outerHeight();var l=$(window);var n=l.width();var m=l.height();var f=h-m;var g=k-n;var e=this.bodyElement.width();var d=this.bodyElement.height();if(g>0||f>0){this.bodyElement.css("overflow","auto");if(g>0){e-=g;this.bodyElement.css("width",e+"px")}if(f>0){d-=f;this.bodyElement.css("height",d+"px")}}var j=this.position()||{my:"center",at:"center",of:$(window),collision:"fit",position:"fixed"};this.contentsElement.css("position",j.position).position(j);return this},center:function(){this.position(null);this.applyPosition();return this},show:function(d){var e=this;this.element.show();this.applyPosition();setTimeout(function(){e.applyPosition()},0);this.contentsElement.hide();this.contentsElement.fadeIn(function(){e.applyPosition();if(d){d()}});if(this.modal()){this.blanketElement.show()}else{this.blanketElement.hide()}a[this.element.attr("id")].open=true;a[this.element.attr("id")].openTimestamp=new Date().getTime();this.bringForward();return this},hide:function(d){a[this.element.attr("id")].open=false;this.blanketElement.hide();this.contentsElement.fadeOut(d);return this},bringForward:function(){var d=jpvs.Popup.getTopMost();if(d){if(d!==this){this.zIndex(d.zIndex()+1)}}else{this.zIndex(10000)}return this},title:jpvs.property({get:function(){return this.titleElement.children("h1").text()},set:function(d){this.titleElement.children("h1").text(d);if(d){this.titleElement.show()}else{this.titleElement.hide()}}}),width:jpvs.property({get:function(){return this.contentsElement.width()},set:function(d){this.contentsElement.css("width",d)}}),maxWidth:jpvs.property({get:function(){return this.contentsElement.css("max-width")},set:function(d){this.contentsElement.css("max-width",d)}}),zIndex:jpvs.property({get:function(){var d=parseInt(this.contentsElement.css("zIndex"));return isFinite(d)?d:10000},set:function(d){this.blanketElement.css("zIndex",d);this.contentsElement.css("zIndex",d)}})}});jpvs.alert=function(){var h={title:jpvs.alert.defaultTitle,text:"",onclose:null,buttons:[{text:"OK"}]};var g=false,f=false;for(var e=0;e<arguments.length;e++){var d=arguments[e];if(!d){continue}if(typeof(d)=="string"){if(!f){h.text=d;f=true}else{if(!g){h.title=h.text;h.text=d;g=true}}}else{if(typeof(d)=="function"||d.__WIDGET__){h.onclose=d}else{if(d.length){h.buttons=d}}}}var j=jpvs.Popup.create();j.maxWidth("75%").title(h.title||null);jpvs.write(j.bodyElement,h.text);if(h.buttons){$.each(h.buttons,function(m,l){if(l){l.click=k(j,l.click)}})}jpvs.writeButtonBar(j.bodyElement,h.buttons);j.show();j.center();j.close.bind(function(){j.hide();if(h.onclose){if(typeof(h.onclose)=="function"){h.onclose()}else{if(h.onclose.__WIDGET__){h.onclose.focus()}}}setTimeout(function(){j.destroy()},5000)});function k(m,l){return function(){if(l){l()}m.close.fire()}}};jpvs.confirm=function(l,h,g,f,k,j){var d=false;function e(){if(d){if(g){g()}}else{if(f){f()}}}jpvs.alert(l,h,e,[{text:k||"OK",click:function(){d=true}},{text:j||"Cancel",click:function(){d=false}}])};function c(d){if(d.which==27){var f=jpvs.Popup.getTopMost();if(f){f.closeButton.click.fire(f);return false}}}function b(h){var d=$(h.target);var f=d.closest(".Popup");var g=f.length?f.attr("id"):"";var j=new Date().getTime()-500;$.each(a,function(k,e){if(e.open&&e.openTimestamp<j&&k!=g){if(e.autoHide){e.widget.hide()}if(e.autoDestroy){e.widget.destroy()}}})}})();(function(){jpvs.Scroller=function(d){this.attach(d);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.Scroller,type:"Scroller",cssClass:"Scroller",create:function(d){var e=document.createElement("div");$(d).append(e);return e},init:function(f){var e={width:f.element.width(),height:f.element.height()};f.element.css({position:"relative",width:"200px",height:"200px"});var d=f.element.contents();f.scrollerBox=jpvs.writeTag(f.element,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"scroll"});f.scrollerSizer=jpvs.writeTag(f.scrollerBox,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});f.contentBox=jpvs.writeTag(f.element,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});f.content=jpvs.writeTag(f.contentBox,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});f.scrollbarW=c();f.scrollbarH=f.scrollbarW;f.scrollerBox.scroll(b(f));$(window).resize(a(f));if(d.length){f.content.append(d);e.height+=f.scrollbarH;e.width+=f.scrollbarW;f.scrollableSize(e).contentSize(e)}a(f)()},canAttachTo:function(d){return false},getMainContentElement:function(){return this.content},prototype:{objectSize:jpvs.property({get:function(){return{width:this.element.width(),height:this.element.height()}},set:function(d){this.element.width(d.width).height(d.height);a(this)()}}),scrollableSize:jpvs.property({get:function(){return{width:this.scrollerSizer.width(),height:this.scrollerSizer.height()}},set:function(d){this.scrollerSizer.width(d.width).height(d.height);a(this)()}}),contentSize:jpvs.property({get:function(){return{width:this.content.width(),height:this.content.height()}},set:function(d){this.content.width(d.width).height(d.height);a(this)()}}),scrollPosition:jpvs.property({get:function(){var e=this.scrollerBox.scrollTop();var d=this.scrollerBox.scrollLeft();return{top:e,left:d}},set:function(d){this.scrollerBox.scrollTop(d.top).scrollLeft(d.left)}}),contentPosition:jpvs.property({get:function(){var e=this.contentBox.scrollTop();var d=this.contentBox.scrollLeft();return{top:e,left:d}},set:function(d){this.contentBox.scrollTop(d.top).scrollLeft(d.left)}})}});function b(d){return function(){d.change.fire(d)}}function a(d){return function(){var f=d.element.innerWidth()-d.scrollbarW;var e=d.element.innerHeight()-d.scrollbarH;d.contentBox.css({width:f+"px",height:e+"px"})}}function c(){var d=$('<div style="width: 100%; height:200px;">test</div>');var e=$('<div style="width:200px;height:150px; position: absolute; top: 0px; left: 0px; visibility: hidden; overflow:hidden;"></div>').append(d);var f=d[0];var g=e[0];$("body").append(g);var h=f.offsetWidth;e.css("overflow","scroll");var j=g.clientWidth;e.remove();return(h-j)}})();(function(){jpvs.Table=function(d){this.attach(d)};jpvs.makeWidget({widget:jpvs.Table,type:"Table",cssClass:"Table",create:function(d){var e=document.createElement("table");$(d).append(e);return e},init:function(d){},canAttachTo:function(d){return $(d).is("table")},prototype:{addClass:function(d){this.element.addClass(d);return this},removeClass:function(d){this.element.removeClass(d);return this},css:function(){this.element.css.apply(this.element,arguments);return this},writeHeaderRow:function(){return c(this,"thead")},writeBodyRow:function(){return c(this,"tbody")},writeRow:function(){return this.writeBodyRow()},writeFooterRow:function(){return c(this,"tfoot")},caption:jpvs.property({get:function(){var d=this.element.children("caption");if(d.length!=0){return d.text()}else{return null}},set:function(e){var d=this.element.children("caption");if(d.length==0){d=$(document.createElement("caption"));this.element.prepend(d)}d.text(e)}}),clear:function(){this.element.find("tr").remove();return this}}});function a(f,d){var e=f.element.children(d);if(e.length==0){e=$(document.createElement(d));f.element.append(e)}return e}function c(g,d){var e=a(g,d);var f=$(document.createElement("tr"));e.append(f);return new b(g,f)}function b(e,d){this.table=e;this.element=d}b.prototype.writeHeaderCell=function(d){return jpvs.writeTag(this.element,"th",d)};b.prototype.writeCell=function(d){return jpvs.writeTag(this.element,"td",d)};b.prototype.getMainContentElement=function(){return this.element}})();jpvs.TextBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.TextBox,type:"TextBox",cssClass:"TextBox",create:function(a){var b=document.createElement("input");$(b).attr("type","text");$(a).append(b);return b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="text"],input[type="password"]')},prototype:{text:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}}),width:jpvs.property({get:function(){return this.element.css("width")},set:function(a){this.element.css("width",a)}})}});(function(){jpvs.TileBrowser=function(j){this.attach(j)};jpvs.makeWidget({widget:jpvs.TileBrowser,type:"TileBrowser",cssClass:"TileBrowser",create:function(j){var k=document.createElement("div");$(j).append(k);return k},init:function(k){k.element.empty();k.element.css({overflow:"hidden"});var j=jpvs.writeTag(k,"div").addClass("Buttons").css({overflow:"hidden",position:"absolute",right:"0px",top:"0px",bottom:"0px",width:"3em",zIndex:99999});jpvs.writeTag(j,"img").addClass("Up").click(d(k,"up")).attr("src",jpvs.Resources.images.up).css({position:"absolute",right:"0px",top:"0px",width:"100%"});jpvs.writeTag(j,"img").addClass("Down").click(d(k,"down")).attr("src",jpvs.Resources.images.down).css({position:"absolute",right:"0px",bottom:"0px",width:"100%"});jpvs.writeTag(j,"img").addClass("Plus").click(d(k,"plus")).attr("src",jpvs.Resources.images.plus).css({position:"absolute",right:"0px",bottom:"50%",width:"100%"});jpvs.writeTag(j,"img").addClass("Minus").click(d(k,"minus")).attr("src",jpvs.Resources.images.minus).css({position:"absolute",right:"0px",top:"50%",width:"100%"});k.element.on("wheel",f(k));k.element.on("touchmove","div.Tile",e(k))},canAttachTo:function(j){return false},prototype:{refresh:function(j){g(this);if(j){b(this)}return this},startingTile:jpvs.property({get:function(){return this.element.data("startingTile")},set:function(j){this.element.data("startingTile",j)}}),width:jpvs.property({get:function(){return this.element.width()},set:function(j){this.element.width(j)}}),height:jpvs.property({get:function(){return this.element.height()},set:function(j){this.element.height(j)}}),tileWidth:jpvs.property({get:function(){var j=this.element.data("tileWidth");return j!=null?j:this.width()/8},set:function(j){this.element.data("tileWidth",j)}}),tileHeight:jpvs.property({get:function(){var j=this.element.data("tileHeight");return j!=null?j:this.tileWidth()},set:function(j){this.element.data("tileHeight",j)}}),desiredTileWidth:jpvs.property({get:function(){var j=this.element.data("desiredTileWidth");return j!=null?j:this.tileWidth()},set:function(j){this.element.data("desiredTileWidth",j)}}),desiredTileHeight:jpvs.property({get:function(){var j=this.element.data("desiredTileHeight");return j!=null?j:this.tileHeight()},set:function(j){this.element.data("desiredTileHeight",j)}}),tileSpacingHorz:jpvs.property({get:function(){var j=this.element.data("tileSpacingHorz");return j!=null?j:this.tileWidth()/5},set:function(j){this.element.data("tileSpacingHorz",j)}}),tileSpacingVert:jpvs.property({get:function(){var j=this.element.data("tileSpacingVert");return j!=null?j:this.tileHeight()/5},set:function(j){this.element.data("tileSpacingVert",j)}}),originX:jpvs.property({get:function(){var j=this.element.data("originX");return j!=null?j:this.width()/2},set:function(j){this.element.data("originX",j)}}),originY:jpvs.property({get:function(){var j=this.element.data("originY");return j!=null?j:this.height()/2},set:function(j){this.element.data("originY",j)}}),desiredOriginX:jpvs.property({get:function(){var j=this.element.data("desiredOriginX");return j!=null?j:this.originX()},set:function(j){this.element.data("desiredOriginX",j)}}),desiredOriginY:jpvs.property({get:function(){var j=this.element.data("desiredOriginY");return j!=null?j:this.originY()},set:function(j){this.element.data("desiredOriginY",j)}})}});function g(E){var z=E.startingTile();if(!z){E.element.children(".Tile").remove();return}var D=E.width();var o=E.height();var C=E.tileWidth();var v=E.tileHeight();var t=E.tileSpacingHorz();var u=E.tileSpacingVert();var m=C+t;var n=v+u;var G=E.originX();var I=E.originY();var F=G-C/2;while(F>0){F-=m}F+=m;var k=[];while(F+C<D){k.push(F);F+=m}var p=0;F=G-C/2;var s=+Infinity;for(var r=0;r<k.length&&Math.abs(k[r]-F)<s;r++){s=Math.abs(k[r]-F)}p=r-1;p=Math.max(p,0);p=Math.min(p,k.length-1);var l=1+(E.lastRenderedGeneration||0);E.lastRenderedGeneration=l;var H=I-v/2;var A=0;var q=p;var B=z;while(B){if(q>=k.length){q=0;H+=n;if(H>=o){break}}F=k[q];a(E,F,H,C,v,D,o,B,A,l);q++;A++;B=B.getNextTile&&B.getNextTile()}q=p-1;H=I-v/2;B=z.getPreviousTile&&z.getPreviousTile();A=-1;while(B){if(q<0){q=k.length-1;H-=n;if(H+v<=0){break}}F=k[q];a(E,F,H,C,v,D,o,B,A,l);q--;A--;B=B.getPreviousTile&&B.getPreviousTile()}E.element.children(".Tile").each(function(){var j=$(this);var x=j.data("tileObject");var w=x&&x.jpvsTileBrowserInfo;if(!w||w.generation!=l){j.remove();x.jpvsTileBrowserInfo=null}})}function c(r,t,p,m,q,l){var s=r+p;var u=t+m;function n(){return 0<=r&&r<=q&&0<=t&&t<=l}function o(){return 0<=s&&s<=q&&0<=t&&t<=l}function j(){return 0<=r&&r<=q&&0<=u&&u<=l}function k(){return 0<=s&&s<=q&&0<=u&&u<=l}return n()||o()||j()||k()}function a(u,v,z,s,o,t,k,r,q,j){if(!r){return}var l=r.jpvsTileBrowserInfo;if(l){if(c(v,z,s,o,t,k)){var m=false;if(l.x!=v){l.x=v;l.tile.css("left",v+"px")}if(l.y!=z){l.y=z;l.tile.css("top",z+"px")}if(l.tw!=s){l.tw=s;l.tile.css("width",s+"px");m=true}if(l.th!=o){l.th=o;l.tile.css("height",o+"px");m=true}if(m){n(l.tile)}l.generation=j}else{l.tile.remove();r.jpvsTileBrowserInfo=null}return}if(!c(v,z,s,o,t,k)){return}var p=jpvs.writeTag(u,"div");p.data("tileObject",r);r.jpvsTileBrowserInfo={tile:p,x:v,y:z,tw:s,th:o,tileIndex:q,generation:j};p.addClass("Tile").css({position:"absolute",left:v+"px",top:z+"px",width:s+"px",height:o+"px",overflow:"hidden"});n(p);return p;function n(w){if(r.template){jpvs.applyTemplate(w.empty(),r.template,{tileObject:r,tileBrowser:u,tile:w})}}}function d(k,j){var l=1.1;return function(){if(j=="up"){k.desiredOriginY(k.desiredOriginY()+k.height()/4)}else{if(j=="down"){k.desiredOriginY(k.desiredOriginY()-k.height()/4)}else{if(j=="plus"){h(k,l)}else{if(j=="minus"){h(k,1/l)}}}}k.refresh(true)}}function h(r,u){var p=r.desiredTileWidth()*u;var o=r.desiredTileHeight()*u;r.desiredTileWidth(p);r.desiredTileHeight(o);var q=r.width();var m=r.height();var s=q/2;var t=m/2;var n=+Infinity;var j;var k,l;r.element.children(".Tile").each(function(){var v=$(this);var x=v.data("tileObject");var w=x&&x.jpvsTileBrowserInfo;if(w){var z=w.x+w.tw/2;var A=w.y+w.th/2;var y=(s-z)*(s-z)+(t-A)*(t-A);if(y<n){n=y;j=x;k=z;l=A}}});if(j){r.originX(k);r.desiredOriginX(k);r.originY(l);r.desiredOriginY(l);r.startingTile(j)}}function f(j){return function(l){var k=l&&l.originalEvent&&l.originalEvent.deltaY||l.originalEvent.deltaX||0;var m=j.desiredOriginY();if(l.shiftKey){var n=k<0?1.1:(1/1.1);h(j,n)}else{j.desiredOriginY(m-k)}j.refresh(true);return false}}function e(j){return function(k){var p=k.originalEvent.changedTouches[0];if(p){var m=$(p.target).closest(".Tile");var o=m&&m.data("tileObject");var l=o&&o.jpvsTileBrowserInfo;if(l){if(o!==j.startingTile()){j.originX(l.x+l.tw/2);j.originY(l.y+l.th/2);j.startingTile(o)}var n=j.element.offset();j.originX(p.pageX-n.left);j.originY(p.pageY-n.top);j.desiredOriginX(p.pageX-n.left);j.desiredOriginY(p.pageY-n.top);j.refresh(false)}}k.preventDefault();return false}}function b(s){var n=o();if(p(n)){var k=500;var r=new Date().getTime();var q=r+k;s.animationInfo={x:{tEnd:q,finalValue:s.desiredOriginX(),k:l(r,q,s.originX(),s.desiredOriginX())},y:{tEnd:q,finalValue:s.desiredOriginY(),k:l(r,q,s.originY(),s.desiredOriginY())},tw:{tEnd:q,finalValue:s.desiredTileWidth(),k:l(r,q,s.tileWidth(),s.desiredTileWidth())},th:{tEnd:q,finalValue:s.desiredTileHeight(),k:l(r,q,s.tileHeight(),s.desiredTileHeight())}};if(!s.animating){jpvs.requestAnimationFrame(j)}}function p(t){return(Math.abs(t.originX)>=1||Math.abs(t.originY)>=1||Math.abs(t.tileWidth)>=1||Math.abs(t.tileHeight)>=1)}function o(){return{originX:s.desiredOriginX()-s.originX(),originY:s.desiredOriginY()-s.originY(),tileWidth:s.desiredTileWidth()-s.tileWidth(),tileHeight:s.desiredTileHeight()-s.tileHeight()}}function l(z,y,t,w){var u=t-w;var v=y-z;var x=u/v/v;return x}function m(z,y,x,w){if(z>=y){return w}else{var v=y-z;var t=x*v*v;var u=w+t;return u}}function j(){if(!s.animationInfo){s.animating=false;return}s.animating=true;var t=new Date().getTime();s.originX(m(t,s.animationInfo.x.tEnd,s.animationInfo.x.k,s.animationInfo.x.finalValue));s.originY(m(t,s.animationInfo.y.tEnd,s.animationInfo.y.k,s.animationInfo.y.finalValue));s.tileWidth(m(t,s.animationInfo.tw.tEnd,s.animationInfo.tw.k,s.animationInfo.tw.finalValue));s.tileHeight(m(t,s.animationInfo.th.tEnd,s.animationInfo.th.k,s.animationInfo.th.finalValue));g(s);if(t>s.animationInfo.x.tEnd&&t>s.animationInfo.y.tEnd&&t>s.animationInfo.tw.tEnd&&t>s.animationInfo.th.tEnd){s.animationInfo=null}jpvs.requestAnimationFrame(j)}}})();(function(){jpvs.Tree=function(f){this.attach(f);this.nodeClick=jpvs.event(this);this.nodeRightClick=jpvs.event(this);this.nodeRendered=jpvs.event(this)};jpvs.Tree.Templates={StandardNode:function(k){var f=jpvs.writeTag(this,"div");f.addClass("Node");var l=new jpvs.Tree.NodeElement(k,f,m,n);jpvs.ImageButton.create(f).click(function(){l.toggle()});if(k.marker){var h=jpvs.writeTag(f,"img");h.addClass("Marker");h.attr("src",k.marker)}if(k.icon){var g=jpvs.writeTag(f,"img");g.addClass("Icon");g.attr("src",k.icon)}var p=jpvs.writeTag(f,"span").addClass("Text");jpvs.write(p,k.toString());var j;var o=l.getTree();p.dblclick(function(){l.toggle()}).mousedown(function(q){j=new Date().getTime()}).mouseup(function(q){var r=new Date().getTime();if(r>j+500){return}if(q.button==2){l.select();o.nodeRightClick.fire(o,null,l,q);return false}else{l.select();o.nodeClick.fire(o,null,l,q)}});return l;function m(){var q=jpvs.find(this.element.find(".ImageButton"));if(this.childrenNodeElements&&this.childrenNodeElements.length!=0){if(this.isExpanded()){if(q){q.imageUrls({normal:jpvs.Resources.images.nodeOpen})}}else{if(q){q.imageUrls({normal:jpvs.Resources.images.nodeClosed})}}}else{if(q){q.imageUrls({normal:jpvs.Resources.images.nodeNoChildren})}this.childrenContainerElement.element.hide()}}function n(){var q=this.getTree();q.element.find(".Node > .Text").removeClass("Selected");this.element.find(".Text").addClass("Selected")}},StandardChildrenContainer:function(h){var g=jpvs.writeTag(this,"div");g.addClass("ChildrenContainer");g.hide();var f=new jpvs.Tree.ChildrenContainerElement(h,g);return f}};jpvs.Tree.NodeElement=function(g,f,h,j){this.node=g;this.element=f;this.refreshState=h;this.select=j;this.parentNodeElement=null;this.childrenContainerElement=null;this.childrenNodeElements=null};jpvs.Tree.NodeElement.prototype.getTree=function(){return jpvs.find(this.element.parents(".Tree").first())};jpvs.Tree.NodeElement.prototype.isExpanded=function(){return this.childrenContainerElement.element.is(":visible")};jpvs.Tree.NodeElement.prototype.toggle=function(){if(this.isExpanded()){this.collapse()}else{this.expand()}};jpvs.Tree.NodeElement.prototype.collapse=function(){var f=this;this.childrenContainerElement.element.hide(100,function(){f.refreshState()})};jpvs.Tree.NodeElement.prototype.expand=function(f){var g=this;var h=this.getTree();if(h){h.refreshChildren(g,function(){if(g.childrenNodeElements&&g.childrenNodeElements.length!=0){g.childrenContainerElement.element.show(100,function(){g.refreshState();if(f){f()}})}else{g.refreshState();if(f){f()}}})}};jpvs.Tree.NodeElement.prototype.setMarkerIcon=function(g){var f=this.element.find("img.Marker");f.attr("src",g)};jpvs.Tree.ChildrenContainerElement=function(g,f){this.node=g;this.element=f;this.nodeElement=null};jpvs.makeWidget({widget:jpvs.Tree,type:"Tree",cssClass:"Tree",create:function(f){var g=document.createElement("div");$(f).append(g);return g},init:function(f){},canAttachTo:function(f){return false},prototype:{nodeTemplate:jpvs.property({get:function(){return this.element.data("nodeTemplate")},set:function(f){this.element.data("nodeTemplate",f)}}),childrenContainerTemplate:jpvs.property({get:function(){return this.element.data("childrenContainerTemplate")},set:function(f){this.element.data("childrenContainerTemplate",f)}}),childrenSelector:jpvs.property({get:function(){return this.element.data("childrenSelector")},set:function(f){this.element.data("childrenSelector",f)}}),dataBind:function(f){a(this,f);return this},refreshChildren:function(g,f){d(this,g,f);return this},nodeElements:function(){return this.element.data("nodeElements")}}});function a(h,f){h.element.empty();var g=[];$.each(f,function(j,k){var l=e(h,h.element,k,null);g.push(l)});h.element.data("nodeElements",g)}function c(l,j,f){var g=l.childrenSelector()||function(m){return m.children||[]};var k=g(j,h);if(k===undefined){}else{if(k===null){f([])}else{f(k)}}function h(m){f(m||[])}}function e(n,h,j,m){var l=n.nodeTemplate()||jpvs.Tree.Templates.StandardNode;var k=jpvs.applyTemplate(h,l,j);k.element.data("nodeElement",k);var g=n.childrenContainerTemplate()||jpvs.Tree.Templates.StandardChildrenContainer;var f=jpvs.applyTemplate(h,g,j);k.parentNodeElement=m;k.childrenContainerElement=f;k.childrenNodeElements=[{}];f.nodeElement=k;k.refreshState();n.nodeRendered.fire(n,null,k);return k}function d(h,g,f){c(h,g.node,function(j){var k=g.childrenContainerElement;k.element.empty();b(h,k,j,g);if(f){f()}})}function b(k,g,f,j){var h=[];$.each(f,function(n,l){var m=e(k,g.element,l,j);h.push(m)});j.childrenNodeElements=h}})();